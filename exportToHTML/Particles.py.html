<html>
<head>
<title>Particles.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #7a7e85;}
.s5 { color: #6aab73;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Particles.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;The Python specialization of the particle system. 
 
See the :ref:`particle-effects` section in the manual for an explanation 
of the particle system. 
&quot;&quot;&quot;</span>

<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">core </span><span class="s2">import </span><span class="s3">*</span>

<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">PhysicalNode</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">ParticleSystem</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">PointParticleFactory</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">ZSpinParticleFactory</span>
<span class="s4">#from panda3d.physics import OrientedParticleFactory</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">BaseParticleRenderer</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">PointParticleRenderer</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">LineParticleRenderer</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">GeomParticleRenderer</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">SparkleParticleRenderer</span>
<span class="s4">#from panda3d.physics import SpriteParticleRenderer</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">BaseParticleEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">ArcEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">BoxEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">DiscEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">LineEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">PointEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">RectangleEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">RingEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">SphereSurfaceEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">SphereVolumeEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">TangentRingEmitter</span>
<span class="s2">from </span><span class="s1">panda3d</span><span class="s3">.</span><span class="s1">physics </span><span class="s2">import </span><span class="s1">SpriteAnim</span>

<span class="s2">from </span><span class="s3">. </span><span class="s2">import </span><span class="s1">SpriteParticleRendererExt</span>

<span class="s2">from </span><span class="s1">direct</span><span class="s3">.</span><span class="s1">directnotify</span><span class="s3">.</span><span class="s1">DirectNotifyGlobal </span><span class="s2">import </span><span class="s1">directNotify</span>
<span class="s2">import </span><span class="s1">sys</span>


<span class="s2">class </span><span class="s1">Particles</span><span class="s3">(</span><span class="s1">ParticleSystem</span><span class="s3">):</span>
    <span class="s1">notify </span><span class="s3">= </span><span class="s1">directNotify</span><span class="s3">.</span><span class="s1">newCategory</span><span class="s3">(</span><span class="s5">'Particles'</span><span class="s3">)</span>
    <span class="s1">id </span><span class="s3">= </span><span class="s6">1</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">=</span><span class="s2">None</span><span class="s3">, </span><span class="s1">poolSize</span><span class="s3">=</span><span class="s6">1024</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">name </span><span class="s3">== </span><span class="s2">None</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">name </span><span class="s3">= </span><span class="s5">'particles-%d' </span><span class="s3">% </span><span class="s1">Particles</span><span class="s3">.</span><span class="s1">id</span>
            <span class="s1">Particles</span><span class="s3">.</span><span class="s1">id </span><span class="s3">+= </span><span class="s6">1</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">name </span><span class="s3">= </span><span class="s1">name</span>
        <span class="s1">ParticleSystem</span><span class="s3">.</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">poolSize</span><span class="s3">)</span>
        <span class="s4"># self.setBirthRate(0.02)</span>
        <span class="s4"># self.setLitterSize(10)</span>
        <span class="s4"># self.setLitterSpread(0)</span>

        <span class="s4"># Set up a physical node</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">node </span><span class="s3">= </span><span class="s1">PhysicalNode</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">name</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">nodePath </span><span class="s3">= </span><span class="s1">NodePath</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">node</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">setRenderParent</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">node</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">node</span><span class="s3">.</span><span class="s1">addPhysical</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">= </span><span class="s5">&quot;undefined&quot;</span>
        <span class="s4"># self.setFactory(&quot;PointParticleFactory&quot;)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">= </span><span class="s5">&quot;undefined&quot;</span>
        <span class="s4"># self.setRenderer(&quot;PointParticleRenderer&quot;)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">= </span><span class="s5">&quot;undefined&quot;</span>
        <span class="s4"># self.setEmitter(&quot;SphereVolumeEmitter&quot;)</span>

        <span class="s4"># Enable particles by default</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled </span><span class="s3">= </span><span class="s6">0</span>
        <span class="s4">#self.enable()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">geomReference </span><span class="s3">= </span><span class="s5">&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">cleanup</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">disable</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">clearLinearForces</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">clearAngularForces</span><span class="s3">()</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">setRenderParent</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">node</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">node</span><span class="s3">.</span><span class="s1">removePhysical</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">nodePath</span><span class="s3">.</span><span class="s1">removeNode</span><span class="s3">()</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">node</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">nodePath</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span>
        <span class="s2">del </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span>

    <span class="s2">def </span><span class="s1">enable</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled </span><span class="s3">== </span><span class="s6">0</span><span class="s3">):</span>
            <span class="s1">base</span><span class="s3">.</span><span class="s1">physicsMgr</span><span class="s3">.</span><span class="s1">attachPhysical</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
            <span class="s1">base</span><span class="s3">.</span><span class="s1">particleMgr</span><span class="s3">.</span><span class="s1">attachParticlesystem</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled </span><span class="s3">= </span><span class="s6">1</span>

    <span class="s2">def </span><span class="s1">disable</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled </span><span class="s3">== </span><span class="s6">1</span><span class="s3">):</span>
            <span class="s1">base</span><span class="s3">.</span><span class="s1">physicsMgr</span><span class="s3">.</span><span class="s1">removePhysical</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
            <span class="s1">base</span><span class="s3">.</span><span class="s1">particleMgr</span><span class="s3">.</span><span class="s1">removeParticlesystem</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled </span><span class="s3">= </span><span class="s6">0</span>

    <span class="s2">def </span><span class="s1">isEnabled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">fEnabled</span>

    <span class="s2">def </span><span class="s1">getNode</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">node</span>

    <span class="s2">def </span><span class="s1">setFactory</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">type</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">== </span><span class="s1">type</span><span class="s3">):</span>
            <span class="s2">return None</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">= </span><span class="s1">type</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;PointParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">= </span><span class="s1">PointParticleFactory</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;ZSpinParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">= </span><span class="s1">ZSpinParticleFactory</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;OrientedParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">= </span><span class="s1">OrientedParticleFactory</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s5">&quot;unknown factory type: %s&quot; </span><span class="s3">% </span><span class="s1">type</span><span class="s3">)</span>
            <span class="s2">return None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">setLifespanBase</span><span class="s3">(</span><span class="s6">0.5</span><span class="s3">)</span>
        <span class="s1">ParticleSystem</span><span class="s3">.</span><span class="s1">setFactory</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">setRenderer</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">type</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s1">type</span><span class="s3">):</span>
            <span class="s2">return None</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">= </span><span class="s1">type</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;PointParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s1">PointParticleRenderer</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">setPointSize</span><span class="s3">(</span><span class="s6">1.0</span><span class="s3">)</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;LineParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s1">LineParticleRenderer</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;GeomParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s1">GeomParticleRenderer</span><span class="s3">()</span>
            <span class="s4"># This was moved here because we do not want to download</span>
            <span class="s4"># the direct tools with toontown.</span>
            <span class="s2">if </span><span class="s1">__dev__</span><span class="s3">:</span>
                <span class="s2">from </span><span class="s1">direct</span><span class="s3">.</span><span class="s1">directtools </span><span class="s2">import </span><span class="s1">DirectSelection</span>
                <span class="s1">npath </span><span class="s3">= </span><span class="s1">NodePath</span><span class="s3">(</span><span class="s5">'default-geom'</span><span class="s3">)</span>
                <span class="s1">bbox </span><span class="s3">= </span><span class="s1">DirectSelection</span><span class="s3">.</span><span class="s1">DirectBoundingBox</span><span class="s3">(</span><span class="s1">npath</span><span class="s3">)</span>
                <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">setGeomNode</span><span class="s3">(</span><span class="s1">bbox</span><span class="s3">.</span><span class="s1">lines</span><span class="s3">.</span><span class="s1">node</span><span class="s3">())</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;SparkleParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s1">SparkleParticleRenderer</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;SpriteParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer </span><span class="s3">= </span><span class="s1">SpriteParticleRendererExt</span><span class="s3">.</span><span class="s1">SpriteParticleRendererExt</span><span class="s3">()</span>
            <span class="s4"># self.renderer.setTextureFromFile()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s5">&quot;unknown renderer type: %s&quot; </span><span class="s3">% </span><span class="s1">type</span><span class="s3">)</span>
            <span class="s2">return None</span>
        <span class="s1">ParticleSystem</span><span class="s3">.</span><span class="s1">setRenderer</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">setEmitter</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">type</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s1">type</span><span class="s3">):</span>
            <span class="s2">return None</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s2">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">= </span><span class="s1">type</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;ArcEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">ArcEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;BoxEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">BoxEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;DiscEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">DiscEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;LineEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">LineEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;PointEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">PointEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;RectangleEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">RectangleEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;RingEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">RingEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;SphereSurfaceEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">SphereSurfaceEmitter</span><span class="s3">()</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;SphereVolumeEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">SphereVolumeEmitter</span><span class="s3">()</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">setRadius</span><span class="s3">(</span><span class="s6">1.0</span><span class="s3">)</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">type </span><span class="s3">== </span><span class="s5">&quot;TangentRingEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">emitter </span><span class="s3">= </span><span class="s1">TangentRingEmitter</span><span class="s3">()</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s5">&quot;unknown emitter type: %s&quot; </span><span class="s3">% </span><span class="s1">type</span><span class="s3">)</span>
            <span class="s2">return None</span>
        <span class="s1">ParticleSystem</span><span class="s3">.</span><span class="s1">setEmitter</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">addForce</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">force</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">force</span><span class="s3">.</span><span class="s1">isLinear</span><span class="s3">()):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">addLinearForce</span><span class="s3">(</span><span class="s1">force</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">addAngularForce</span><span class="s3">(</span><span class="s1">force</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">removeForce</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">force</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">force </span><span class="s3">== </span><span class="s2">None</span><span class="s3">):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">notify</span><span class="s3">.</span><span class="s1">warning</span><span class="s3">(</span><span class="s5">'removeForce() - force == None!'</span><span class="s3">)</span>
            <span class="s2">return</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">force</span><span class="s3">.</span><span class="s1">isLinear</span><span class="s3">()):</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">removeLinearForce</span><span class="s3">(</span><span class="s1">force</span><span class="s3">)</span>
        <span class="s2">else</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">removeAngularForce</span><span class="s3">(</span><span class="s1">force</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">setRenderNodePath</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">nodePath</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">setRenderParent</span><span class="s3">(</span><span class="s1">nodePath</span><span class="s3">.</span><span class="s1">node</span><span class="s3">())</span>

    <span class="s4">## Getters ##</span>
    <span class="s2">def </span><span class="s1">getName</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">name</span>

    <span class="s2">def </span><span class="s1">getFactory</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span>

    <span class="s2">def </span><span class="s1">getEmitter</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span>

    <span class="s2">def </span><span class="s1">getRenderer</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span>

    <span class="s2">def </span><span class="s1">printParams</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">file </span><span class="s3">= </span><span class="s1">sys</span><span class="s3">.</span><span class="s1">stdout</span><span class="s3">, </span><span class="s1">targ </span><span class="s3">= </span><span class="s5">'self'</span><span class="s3">):</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Particles parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.setFactory(</span><span class="s2">\&quot;</span><span class="s5">' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">+ </span><span class="s5">'</span><span class="s2">\&quot;</span><span class="s5">)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.setRenderer(</span><span class="s2">\&quot;</span><span class="s5">' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">+ </span><span class="s5">'</span><span class="s2">\&quot;</span><span class="s5">)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.setEmitter(</span><span class="s2">\&quot;</span><span class="s5">' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">+ </span><span class="s5">'</span><span class="s2">\&quot;</span><span class="s5">)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>

        <span class="s4"># System parameters</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setPoolSize(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">int</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getPoolSize</span><span class="s3">())))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setBirthRate(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">getBirthRate</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setLitterSize(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">int</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSize</span><span class="s3">())))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setLitterSpread(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSpread</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setSystemLifespan(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">getSystemLifespan</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setLocalVelocityFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">getLocalVelocityFlag</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.setSystemGrowsOlderFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">getSystemGrowsOlderFlag</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Factory parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ (</span><span class="s5">'.factory.setLifespanBase(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                           <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanBase</span><span class="s3">()))</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setLifespanSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanSpread</span><span class="s3">())</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setMassBase(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getMassBase</span><span class="s3">())</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setMassSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getMassSpread</span><span class="s3">())</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setTerminalVelocityBase(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getTerminalVelocityBase</span><span class="s3">())</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setTerminalVelocitySpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getTerminalVelocitySpread</span><span class="s3">())</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">== </span><span class="s5">&quot;PointParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Point factory parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">== </span><span class="s5">&quot;ZSpinParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Z Spin factory parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setInitialAngle(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getInitialAngle</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setInitialAngleSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getInitialAngleSpread</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.enableAngularVelocity(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getAngularVelocityEnabled</span><span class="s3">())</span>
            <span class="s2">if</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getAngularVelocityEnabled</span><span class="s3">()):</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setAngularVelocity(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getAngularVelocity</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setAngularVelocitySpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getAngularVelocitySpread</span><span class="s3">())</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setFinalAngle(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                            <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getFinalAngle</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setFinalAngleSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getFinalAngleSpread</span><span class="s3">())</span>

        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factoryType </span><span class="s3">== </span><span class="s5">&quot;OrientedParticleFactory&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Oriented factory parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setInitialOrientation(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getInitialOrientation</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.factory.setFinalOrientation(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getFinalOrientation</span><span class="s3">())</span>

        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Renderer parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">alphaMode </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAlphaMode</span><span class="s3">()</span>
        <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHANONE&quot;</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">alphaMode </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PRALPHANONE</span><span class="s3">):</span>
            <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHANONE&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">alphaMode </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PRALPHAOUT</span><span class="s3">):</span>
            <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHAOUT&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">alphaMode </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PRALPHAIN</span><span class="s3">):</span>
            <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHAIN&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">alphaMode </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PRALPHAINOUT</span><span class="s3">):</span>
            <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHAINOUT&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">alphaMode </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PRALPHAUSER</span><span class="s3">):</span>
            <span class="s1">aMode </span><span class="s3">= </span><span class="s5">&quot;PRALPHAUSER&quot;</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAlphaMode(BaseParticleRenderer.' </span><span class="s3">+ </span><span class="s1">aMode </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setUserAlpha(%.2f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getUserAlpha</span><span class="s3">())</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s5">&quot;PointParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Point parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setPointSize(%.2f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">\</span>
                                        <span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getPointSize</span><span class="s3">())</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getStartColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setStartColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getEndColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setEndColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">blendType </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getBlendType</span><span class="s3">()</span>
            <span class="s1">bType </span><span class="s3">= </span><span class="s5">&quot;PPONECOLOR&quot;</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">blendType </span><span class="s3">== </span><span class="s1">PointParticleRenderer</span><span class="s3">.</span><span class="s1">PPONECOLOR</span><span class="s3">):</span>
                <span class="s1">bType </span><span class="s3">= </span><span class="s5">&quot;PPONECOLOR&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendType </span><span class="s3">== </span><span class="s1">PointParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDLIFE</span><span class="s3">):</span>
                <span class="s1">bType </span><span class="s3">= </span><span class="s5">&quot;PPBLENDLIFE&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendType </span><span class="s3">== </span><span class="s1">PointParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDVEL</span><span class="s3">):</span>
                <span class="s1">bType </span><span class="s3">= </span><span class="s5">&quot;PPBLENDVEL&quot;</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setBlendType(PointParticleRenderer.' </span><span class="s3">+ </span><span class="s1">bType </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">blendMethod </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getBlendMethod</span><span class="s3">()</span>
            <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPNOBLEND&quot;</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPNOBLEND</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPNOBLEND&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDLINEAR</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPBLENDLINEAR&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDCUBIC</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPBLENDCUBIC&quot;</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setBlendMethod(BaseParticleRenderer.' </span><span class="s3">+ </span><span class="s1">bMethod </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s5">&quot;LineParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Line parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getHeadColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setHeadColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getTailColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setTailColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">sf </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getLineScaleFactor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setLineScaleFactor(%.2f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sf</span><span class="s3">)))</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s5">&quot;GeomParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Geom parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">node </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getGeomNode</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'geomRef = loader.loadModel(&quot;' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">geomReference </span><span class="s3">+ </span><span class="s5">'&quot;)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setGeomNode(geomRef.node())</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.geomReference = &quot;' </span><span class="s3">+ </span><span class="s1">self</span><span class="s3">.</span><span class="s1">geomReference </span><span class="s3">+ </span><span class="s5">'&quot;</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span><span class="s1">;</span>
            <span class="s1">cbmLut </span><span class="s3">= (</span><span class="s5">'MNone'</span><span class="s3">,</span><span class="s5">'MAdd'</span><span class="s3">,</span><span class="s5">'MSubtract'</span><span class="s3">,</span><span class="s5">'MInvSubtract'</span><span class="s3">,</span><span class="s5">'MMin'</span><span class="s3">,</span><span class="s5">'MMax'</span><span class="s3">)</span>
            <span class="s1">cboLut </span><span class="s3">= (</span><span class="s5">'OZero'</span><span class="s3">,</span><span class="s5">'OOne'</span><span class="s3">,</span><span class="s5">'OIncomingColor'</span><span class="s3">,</span><span class="s5">'OOneMinusIncomingColor'</span><span class="s3">,</span><span class="s5">'OFbufferColor'</span><span class="s3">,</span>
                      <span class="s5">'OOneMinusFbufferColor'</span><span class="s3">,</span><span class="s5">'OIncomingAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusIncomingAlpha'</span><span class="s3">,</span>
                      <span class="s5">'OFbufferAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusFbufferAlpha'</span><span class="s3">,</span><span class="s5">'OConstantColor'</span><span class="s3">,</span>
                      <span class="s5">'OOneMinusConstantColor'</span><span class="s3">,</span><span class="s5">'OConstantAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusConstantAlpha'</span><span class="s3">,</span>
                      <span class="s5">'OIncomingColorSaturate'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setXScaleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getXScaleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setYScaleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getYScaleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setZScaleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getZScaleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setInitialXScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getInitialXScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setFinalXScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getFinalXScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setInitialYScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getInitialYScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setFinalYScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getFinalYScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setInitialZScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getInitialZScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setFinalZScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getFinalZScale</span><span class="s3">())</span>

            <span class="s1">cbAttrib </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getRenderNode</span><span class="s3">().</span><span class="s1">getAttrib</span><span class="s3">(</span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">getClassType</span><span class="s3">())</span>
            <span class="s2">if</span><span class="s3">(</span><span class="s1">cbAttrib</span><span class="s3">):</span>
                <span class="s1">cbMode </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getMode</span><span class="s3">()</span>
                <span class="s2">if</span><span class="s3">(</span><span class="s1">cbMode </span><span class="s3">&gt; </span><span class="s6">0</span><span class="s3">):</span>
                    <span class="s2">if</span><span class="s3">(</span><span class="s1">cbMode </span><span class="s2">in </span><span class="s3">(</span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MAdd</span><span class="s3">, </span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MSubtract</span><span class="s3">, </span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MInvSubtract</span><span class="s3">)):</span>
                        <span class="s1">cboa </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getOperandA</span><span class="s3">()</span>
                        <span class="s1">cbob </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getOperandB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.setColorBlendMode(ColorBlendAttrib.%s, ColorBlendAttrib.%s, ColorBlendAttrib.%s)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                                <span class="s3">(</span><span class="s1">cbmLut</span><span class="s3">[</span><span class="s1">cbMode</span><span class="s3">], </span><span class="s1">cboLut</span><span class="s3">[</span><span class="s1">cboa</span><span class="s3">], </span><span class="s1">cboLut</span><span class="s3">[</span><span class="s1">cbob</span><span class="s3">]))</span>
                    <span class="s2">else</span><span class="s3">:</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.setColorBlendMode(ColorBlendAttrib.%s)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">cbmLut</span><span class="s3">[</span><span class="s1">cbMode</span><span class="s3">])</span>
            <span class="s1">cim </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getColorInterpolationManager</span><span class="s3">()</span>
            <span class="s1">segIdList </span><span class="s3">= [</span><span class="s1">int</span><span class="s3">(</span><span class="s1">seg</span><span class="s3">) </span><span class="s2">for </span><span class="s1">seg </span><span class="s2">in </span><span class="s1">cim</span><span class="s3">.</span><span class="s1">getSegmentIdList</span><span class="s3">().</span><span class="s1">split</span><span class="s3">()]</span>
            <span class="s2">for </span><span class="s1">sid </span><span class="s2">in </span><span class="s1">segIdList</span><span class="s3">:</span>
                <span class="s1">seg </span><span class="s3">= </span><span class="s1">cim</span><span class="s3">.</span><span class="s1">getSegment</span><span class="s3">(</span><span class="s1">sid</span><span class="s3">)</span>
                <span class="s2">if </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">isEnabled</span><span class="s3">():</span>
                    <span class="s1">t_b </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getTimeBegin</span><span class="s3">()</span>
                    <span class="s1">t_e </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getTimeEnd</span><span class="s3">()</span>
                    <span class="s1">mod </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">isModulated</span><span class="s3">()</span>
                    <span class="s1">fun </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getFunction</span><span class="s3">()</span>
                    <span class="s1">typ </span><span class="s3">= </span><span class="s1">type</span><span class="s3">(</span><span class="s1">fun</span><span class="s3">).</span><span class="s1">__name__</span>
                    <span class="s2">if </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionConstant'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addConstant('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),'</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionLinear'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addLinear('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),'</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionStepwave'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">w_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getWidthA</span><span class="s3">()</span>
                        <span class="s1">w_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getWidthB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addStepwave('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s1">repr</span><span class="s3">(</span><span class="s1">w_a</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">w_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionSinusoid'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">per </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getPeriod</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addSinusoid('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s1">repr</span><span class="s3">(</span><span class="s1">per</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>

        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s5">&quot;SparkleParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Sparkle parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getCenterColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setCenterColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getEdgeColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setEdgeColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setBirthRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getBirthRadius</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setDeathRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getDeathRadius</span><span class="s3">())</span>
            <span class="s1">lifeScale </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getLifeScale</span><span class="s3">()</span>
            <span class="s1">lScale </span><span class="s3">= </span><span class="s5">&quot;SPNOSCALE&quot;</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">lifeScale </span><span class="s3">== </span><span class="s1">SparkleParticleRenderer</span><span class="s3">.</span><span class="s1">SPSCALE</span><span class="s3">):</span>
                <span class="s1">lScale </span><span class="s3">= </span><span class="s5">&quot;SPSCALE&quot;</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setLifeScale(SparkleParticleRenderer.' </span><span class="s3">+ </span><span class="s1">lScale </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">rendererType </span><span class="s3">== </span><span class="s5">&quot;SpriteParticleRenderer&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Sprite parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAnimateFramesEnable</span><span class="s3">()):</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAnimateFramesEnable(True)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                <span class="s1">rate </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAnimateFramesRate</span><span class="s3">()</span>
                <span class="s2">if</span><span class="s3">(</span><span class="s1">rate</span><span class="s3">):</span>
                    <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAnimateFramesRate(%.3f)</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">%</span><span class="s1">rate</span><span class="s3">)</span>
            <span class="s1">animCount </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getNumAnims</span><span class="s3">()</span>
            <span class="s2">for </span><span class="s1">x </span><span class="s2">in </span><span class="s1">range</span><span class="s3">(</span><span class="s1">animCount</span><span class="s3">):</span>
                <span class="s1">anim </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAnim</span><span class="s3">(</span><span class="s1">x</span><span class="s3">)</span>
                <span class="s2">if</span><span class="s3">(</span><span class="s1">anim</span><span class="s3">.</span><span class="s1">getSourceType</span><span class="s3">() == </span><span class="s1">SpriteAnim</span><span class="s3">.</span><span class="s1">STTexture</span><span class="s3">):</span>
                    <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.addTextureFromFile(</span><span class="s2">\'</span><span class="s5">%s</span><span class="s2">\'</span><span class="s5">)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">anim</span><span class="s3">.</span><span class="s1">getTexSource</span><span class="s3">(),))</span>
                <span class="s2">else</span><span class="s3">:</span>
                    <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.addTextureFromNode(</span><span class="s2">\'</span><span class="s5">%s</span><span class="s2">\'</span><span class="s5">,</span><span class="s2">\'</span><span class="s5">%s</span><span class="s2">\'</span><span class="s5">)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">anim</span><span class="s3">.</span><span class="s1">getModelSource</span><span class="s3">(), </span><span class="s1">anim</span><span class="s3">.</span><span class="s1">getNodeSource</span><span class="s3">()))</span>
            <span class="s1">sColor </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getColor</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setColor(Vec4(%.2f, %.2f, %.2f, %.2f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">2</span><span class="s3">], </span><span class="s1">sColor</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])))</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setXScaleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getXScaleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setYScaleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getYScaleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAnimAngleFlag(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAnimAngleFlag</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setInitialXScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getInitialXScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setFinalXScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getFinalXScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setInitialYScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getInitialYScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setFinalYScale(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getFinalYScale</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setNonanimatedTheta(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getNonanimatedTheta</span><span class="s3">())</span>
            <span class="s1">blendMethod </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAlphaBlendMethod</span><span class="s3">()</span>
            <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPNOBLEND&quot;</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPNOBLEND</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPNOBLEND&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDLINEAR</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPBLENDLINEAR&quot;</span>
            <span class="s2">elif </span><span class="s3">(</span><span class="s1">blendMethod </span><span class="s3">== </span><span class="s1">BaseParticleRenderer</span><span class="s3">.</span><span class="s1">PPBLENDCUBIC</span><span class="s3">):</span>
                <span class="s1">bMethod </span><span class="s3">= </span><span class="s5">&quot;PPBLENDCUBIC&quot;</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAlphaBlendMethod(BaseParticleRenderer.' </span><span class="s3">+ </span><span class="s1">bMethod </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.renderer.setAlphaDisable(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getAlphaDisable</span><span class="s3">())</span>
            <span class="s4"># Save the color blending to file</span>
            <span class="s1">cbmLut </span><span class="s3">= (</span><span class="s5">'MNone'</span><span class="s3">,</span><span class="s5">'MAdd'</span><span class="s3">,</span><span class="s5">'MSubtract'</span><span class="s3">,</span><span class="s5">'MInvSubtract'</span><span class="s3">,</span><span class="s5">'MMin'</span><span class="s3">,</span><span class="s5">'MMax'</span><span class="s3">)</span>
            <span class="s1">cboLut </span><span class="s3">= (</span><span class="s5">'OZero'</span><span class="s3">,</span><span class="s5">'OOne'</span><span class="s3">,</span><span class="s5">'OIncomingColor'</span><span class="s3">,</span><span class="s5">'OOneMinusIncomingColor'</span><span class="s3">,</span><span class="s5">'OFbufferColor'</span><span class="s3">,</span>
                      <span class="s5">'OOneMinusFbufferColor'</span><span class="s3">,</span><span class="s5">'OIncomingAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusIncomingAlpha'</span><span class="s3">,</span>
                      <span class="s5">'OFbufferAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusFbufferAlpha'</span><span class="s3">,</span><span class="s5">'OConstantColor'</span><span class="s3">,</span>
                      <span class="s5">'OOneMinusConstantColor'</span><span class="s3">,</span><span class="s5">'OConstantAlpha'</span><span class="s3">,</span><span class="s5">'OOneMinusConstantAlpha'</span><span class="s3">,</span>
                      <span class="s5">'OIncomingColorSaturate'</span><span class="s3">)</span>
            <span class="s1">cbAttrib </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getRenderNode</span><span class="s3">().</span><span class="s1">getAttrib</span><span class="s3">(</span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">getClassType</span><span class="s3">())</span>
            <span class="s2">if</span><span class="s3">(</span><span class="s1">cbAttrib</span><span class="s3">):</span>
                <span class="s1">cbMode </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getMode</span><span class="s3">()</span>
                <span class="s2">if</span><span class="s3">(</span><span class="s1">cbMode </span><span class="s3">&gt; </span><span class="s6">0</span><span class="s3">):</span>
                    <span class="s2">if</span><span class="s3">(</span><span class="s1">cbMode </span><span class="s2">in </span><span class="s3">(</span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MAdd</span><span class="s3">, </span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MSubtract</span><span class="s3">, </span><span class="s1">ColorBlendAttrib</span><span class="s3">.</span><span class="s1">MInvSubtract</span><span class="s3">)):</span>
                        <span class="s1">cboa </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getOperandA</span><span class="s3">()</span>
                        <span class="s1">cbob </span><span class="s3">= </span><span class="s1">cbAttrib</span><span class="s3">.</span><span class="s1">getOperandB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.setColorBlendMode(ColorBlendAttrib.%s, ColorBlendAttrib.%s, ColorBlendAttrib.%s)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">%</span>
                                <span class="s3">(</span><span class="s1">cbmLut</span><span class="s3">[</span><span class="s1">cbMode</span><span class="s3">], </span><span class="s1">cboLut</span><span class="s3">[</span><span class="s1">cboa</span><span class="s3">], </span><span class="s1">cboLut</span><span class="s3">[</span><span class="s1">cbob</span><span class="s3">]))</span>
                    <span class="s2">else</span><span class="s3">:</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.setColorBlendMode(ColorBlendAttrib.%s)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">cbmLut</span><span class="s3">[</span><span class="s1">cbMode</span><span class="s3">])</span>
            <span class="s1">cim </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">renderer</span><span class="s3">.</span><span class="s1">getColorInterpolationManager</span><span class="s3">()</span>
            <span class="s1">segIdList </span><span class="s3">= [</span><span class="s1">int</span><span class="s3">(</span><span class="s1">seg</span><span class="s3">) </span><span class="s2">for </span><span class="s1">seg </span><span class="s2">in </span><span class="s1">cim</span><span class="s3">.</span><span class="s1">getSegmentIdList</span><span class="s3">().</span><span class="s1">split</span><span class="s3">()]</span>
            <span class="s2">for </span><span class="s1">sid </span><span class="s2">in </span><span class="s1">segIdList</span><span class="s3">:</span>
                <span class="s1">seg </span><span class="s3">= </span><span class="s1">cim</span><span class="s3">.</span><span class="s1">getSegment</span><span class="s3">(</span><span class="s1">sid</span><span class="s3">)</span>
                <span class="s2">if </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">isEnabled</span><span class="s3">():</span>
                    <span class="s1">t_b </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getTimeBegin</span><span class="s3">()</span>
                    <span class="s1">t_e </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getTimeEnd</span><span class="s3">()</span>
                    <span class="s1">mod </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">isModulated</span><span class="s3">()</span>
                    <span class="s1">fun </span><span class="s3">= </span><span class="s1">seg</span><span class="s3">.</span><span class="s1">getFunction</span><span class="s3">()</span>
                    <span class="s1">typ </span><span class="s3">= </span><span class="s1">type</span><span class="s3">(</span><span class="s1">fun</span><span class="s3">).</span><span class="s1">__name__</span>
                    <span class="s2">if </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionConstant'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addConstant('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),'</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionLinear'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addLinear('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),'</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionStepwave'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">w_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getWidthA</span><span class="s3">()</span>
                        <span class="s1">w_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getWidthB</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addStepwave('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s1">repr</span><span class="s3">(</span><span class="s1">w_a</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">w_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
                    <span class="s2">elif </span><span class="s1">typ </span><span class="s3">== </span><span class="s5">'ColorInterpolationFunctionSinusoid'</span><span class="s3">:</span>
                        <span class="s1">c_a </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorA</span><span class="s3">()</span>
                        <span class="s1">c_b </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getColorB</span><span class="s3">()</span>
                        <span class="s1">per </span><span class="s3">= </span><span class="s1">fun</span><span class="s3">.</span><span class="s1">getPeriod</span><span class="s3">()</span>
                        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ</span><span class="s3">+</span><span class="s5">'.renderer.getColorInterpolationManager().addSinusoid('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_b</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">t_e</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_a</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s5">'Vec4('</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">0</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">c_b</span><span class="s3">[</span><span class="s6">3</span><span class="s3">])+</span><span class="s5">'),' </span><span class="s3">+ </span><span class="s1">\</span>
                                   <span class="s1">repr</span><span class="s3">(</span><span class="s1">per</span><span class="s3">)+</span><span class="s5">','</span><span class="s3">+</span><span class="s1">repr</span><span class="s3">(</span><span class="s1">mod</span><span class="s3">)+</span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>

        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Emitter parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">emissionType </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getEmissionType</span><span class="s3">()</span>
        <span class="s1">eType </span><span class="s3">= </span><span class="s5">&quot;ETEXPLICIT&quot;</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">emissionType </span><span class="s3">== </span><span class="s1">BaseParticleEmitter</span><span class="s3">.</span><span class="s1">ETEXPLICIT</span><span class="s3">):</span>
            <span class="s1">eType </span><span class="s3">= </span><span class="s5">&quot;ETEXPLICIT&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">emissionType </span><span class="s3">== </span><span class="s1">BaseParticleEmitter</span><span class="s3">.</span><span class="s1">ETRADIATE</span><span class="s3">):</span>
            <span class="s1">eType </span><span class="s3">= </span><span class="s5">&quot;ETRADIATE&quot;</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">emissionType </span><span class="s3">== </span><span class="s1">BaseParticleEmitter</span><span class="s3">.</span><span class="s1">ETCUSTOM</span><span class="s3">):</span>
            <span class="s1">eType </span><span class="s3">= </span><span class="s5">&quot;ETCUSTOM&quot;</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setEmissionType(BaseParticleEmitter.' </span><span class="s3">+ </span><span class="s1">eType </span><span class="s3">+ </span><span class="s5">')</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setAmplitude(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getAmplitude</span><span class="s3">())</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setAmplitudeSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getAmplitudeSpread</span><span class="s3">())</span>
        <span class="s1">oForce </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getOffsetForce</span><span class="s3">()</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setOffsetForce(Vec3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s1">oForce </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getExplicitLaunchVector</span><span class="s3">()</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setExplicitLaunchVector(Vec3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">oForce</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s1">orig </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadiateOrigin</span><span class="s3">()</span>
        <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadiateOrigin(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">orig</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">orig</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">orig</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;BoxEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Box parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">bound </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getMinBound</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setMinBound(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">bound</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">bound</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">bound</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
            <span class="s1">bound </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getMaxBound</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setMaxBound(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">bound</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">bound</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">bound</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;DiscEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Disc parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadius</span><span class="s3">())</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">eType </span><span class="s3">== </span><span class="s5">&quot;ETCUSTOM&quot;</span><span class="s3">):</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setOuterAngle(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getOuterAngle</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setInnerAngle(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getInnerAngle</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setOuterMagnitude(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getOuterMagnitude</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setInnerMagnitude(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getInnerMagnitude</span><span class="s3">())</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setCubicLerping(%d)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getCubicLerping</span><span class="s3">())</span>

        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;LineEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Line parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">point </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getEndpoint1</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setEndpoint1(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">point</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
            <span class="s1">point </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getEndpoint2</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setEndpoint2(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">point</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;PointEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Point parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">point </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getLocation</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setLocation(Point3(%.4f, %.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">point</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">1</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">2</span><span class="s3">])))</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;RectangleEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Rectangle parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">point </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getMinBound</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setMinBound(Point2(%.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">point</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])))</span>
            <span class="s1">point </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getMaxBound</span><span class="s3">()</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">((</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setMaxBound(Point2(%.4f, %.4f))</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% (</span><span class="s1">point</span><span class="s3">[</span><span class="s6">0</span><span class="s3">], </span><span class="s1">point</span><span class="s3">[</span><span class="s6">1</span><span class="s3">])))</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;RingEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Ring parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadius</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadiusSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadiusSpread</span><span class="s3">())</span>
            <span class="s2">if </span><span class="s3">(</span><span class="s1">eType </span><span class="s3">== </span><span class="s5">&quot;ETCUSTOM&quot;</span><span class="s3">):</span>
                <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setAngle(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getAngle</span><span class="s3">())</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;SphereSurfaceEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Sphere Surface parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadius</span><span class="s3">())</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;SphereVolumeEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Sphere Volume parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadius</span><span class="s3">())</span>
        <span class="s2">elif </span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitterType </span><span class="s3">== </span><span class="s5">&quot;TangentRingEmitter&quot;</span><span class="s3">):</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s5">'# Tangent Ring parameters</span><span class="s2">\n</span><span class="s5">'</span><span class="s3">)</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadius(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadius</span><span class="s3">())</span>
            <span class="s1">file</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">targ </span><span class="s3">+ </span><span class="s5">'.emitter.setRadiusSpread(%.4f)</span><span class="s2">\n</span><span class="s5">' </span><span class="s3">% </span><span class="s1">self</span><span class="s3">.</span><span class="s1">emitter</span><span class="s3">.</span><span class="s1">getRadiusSpread</span><span class="s3">())</span>

    <span class="s2">def </span><span class="s1">getPoolSizeRanges</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">litterRange </span><span class="s3">= [</span><span class="s1">max</span><span class="s3">(</span><span class="s6">1</span><span class="s3">,</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSize</span><span class="s3">()-</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSpread</span><span class="s3">()),</span>
                       <span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSize</span><span class="s3">(),</span>
                       <span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSize</span><span class="s3">()+</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getLitterSpread</span><span class="s3">()]</span>
        <span class="s1">lifespanRange </span><span class="s3">= [</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanBase</span><span class="s3">()-</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanSpread</span><span class="s3">(),</span>
                         <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanBase</span><span class="s3">(),</span>
                         <span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanBase</span><span class="s3">()+</span><span class="s1">self</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">.</span><span class="s1">getLifespanSpread</span><span class="s3">()]</span>
        <span class="s1">birthRateRange </span><span class="s3">= [</span><span class="s1">self</span><span class="s3">.</span><span class="s1">getBirthRate</span><span class="s3">()] * </span><span class="s6">3</span>

        <span class="s1">print</span><span class="s3">(</span><span class="s5">'Litter Ranges:    %s' </span><span class="s3">% </span><span class="s1">litterRange</span><span class="s3">)</span>
        <span class="s1">print</span><span class="s3">(</span><span class="s5">'LifeSpan Ranges:  %s' </span><span class="s3">% </span><span class="s1">lifespanRange</span><span class="s3">)</span>
        <span class="s1">print</span><span class="s3">(</span><span class="s5">'BirthRate Ranges: %s' </span><span class="s3">% </span><span class="s1">birthRateRange</span><span class="s3">)</span>

        <span class="s2">return </span><span class="s1">dict</span><span class="s3">(</span><span class="s1">zip</span><span class="s3">((</span><span class="s5">'min'</span><span class="s3">,</span><span class="s5">'median'</span><span class="s3">,</span><span class="s5">'max'</span><span class="s3">),[</span><span class="s1">l</span><span class="s3">*</span><span class="s1">s</span><span class="s3">/</span><span class="s1">b </span><span class="s2">for </span><span class="s1">l</span><span class="s3">,</span><span class="s1">s</span><span class="s3">,</span><span class="s1">b </span><span class="s2">in </span><span class="s1">zip</span><span class="s3">(</span><span class="s1">litterRange</span><span class="s3">,</span><span class="s1">lifespanRange</span><span class="s3">,</span><span class="s1">birthRateRange</span><span class="s3">)]))</span>

    <span class="s2">def </span><span class="s1">accelerate</span><span class="s3">(</span><span class="s1">self</span><span class="s3">,</span><span class="s1">time</span><span class="s3">,</span><span class="s1">stepCount </span><span class="s3">= </span><span class="s6">1</span><span class="s3">,</span><span class="s1">stepTime</span><span class="s3">=</span><span class="s6">0.0</span><span class="s3">):</span>
        <span class="s2">if </span><span class="s1">time </span><span class="s3">&gt; </span><span class="s6">0.0</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s1">stepTime </span><span class="s3">== </span><span class="s6">0.0</span><span class="s3">:</span>
                <span class="s1">stepTime </span><span class="s3">= </span><span class="s1">float</span><span class="s3">(</span><span class="s1">time</span><span class="s3">)/</span><span class="s1">stepCount</span>
                <span class="s1">remainder </span><span class="s3">= </span><span class="s6">0.0</span>
            <span class="s2">else</span><span class="s3">:</span>
                <span class="s1">stepCount </span><span class="s3">= </span><span class="s1">int</span><span class="s3">(</span><span class="s1">float</span><span class="s3">(</span><span class="s1">time</span><span class="s3">)/</span><span class="s1">stepTime</span><span class="s3">)</span>
                <span class="s1">remainder </span><span class="s3">= </span><span class="s1">time</span><span class="s3">-</span><span class="s1">stepCount</span><span class="s3">*</span><span class="s1">stepTime</span>

            <span class="s2">for </span><span class="s1">step </span><span class="s2">in </span><span class="s1">range</span><span class="s3">(</span><span class="s1">stepCount</span><span class="s3">):</span>
                <span class="s1">base</span><span class="s3">.</span><span class="s1">particleMgr</span><span class="s3">.</span><span class="s1">doParticles</span><span class="s3">(</span><span class="s1">stepTime</span><span class="s3">,</span><span class="s1">self</span><span class="s3">,</span><span class="s2">False</span><span class="s3">)</span>
                <span class="s1">base</span><span class="s3">.</span><span class="s1">physicsMgr</span><span class="s3">.</span><span class="s1">doPhysics</span><span class="s3">(</span><span class="s1">stepTime</span><span class="s3">,</span><span class="s1">self</span><span class="s3">)</span>

            <span class="s2">if</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">):</span>
                <span class="s1">base</span><span class="s3">.</span><span class="s1">particleMgr</span><span class="s3">.</span><span class="s1">doParticles</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">,</span><span class="s1">self</span><span class="s3">,</span><span class="s2">False</span><span class="s3">)</span>
                <span class="s1">base</span><span class="s3">.</span><span class="s1">physicsMgr</span><span class="s3">.</span><span class="s1">doPhysics</span><span class="s3">(</span><span class="s1">remainder</span><span class="s3">,</span><span class="s1">self</span><span class="s3">)</span>

            <span class="s1">self</span><span class="s3">.</span><span class="s1">render</span><span class="s3">()</span>

    <span class="s4"># Snake-case aliases.</span>
    <span class="s1">is_enabled </span><span class="s3">= </span><span class="s1">isEnabled</span>
    <span class="s1">set_factory </span><span class="s3">= </span><span class="s1">setFactory</span>
    <span class="s1">set_renderer </span><span class="s3">= </span><span class="s1">setRenderer</span>
    <span class="s1">set_emitter </span><span class="s3">= </span><span class="s1">setEmitter</span>
    <span class="s1">add_force </span><span class="s3">= </span><span class="s1">addForce</span>
    <span class="s1">remove_force </span><span class="s3">= </span><span class="s1">removeForce</span>
    <span class="s1">set_render_node_path </span><span class="s3">= </span><span class="s1">setRenderNodePath</span>
    <span class="s1">get_factory </span><span class="s3">= </span><span class="s1">getFactory</span>
    <span class="s1">get_emitter </span><span class="s3">= </span><span class="s1">getEmitter</span>
    <span class="s1">get_renderer </span><span class="s3">= </span><span class="s1">getRenderer</span>
    <span class="s1">print_params </span><span class="s3">= </span><span class="s1">printParams</span>
    <span class="s1">get_pool_size_ranges </span><span class="s3">= </span><span class="s1">getPoolSizeRanges</span>
</pre>
</body>
</html>