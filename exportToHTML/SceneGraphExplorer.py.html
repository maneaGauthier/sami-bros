<html>
<head>
<title>SceneGraphExplorer.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #cf8e6d;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
SceneGraphExplorer.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;This module defines a widget used to display a graphical overview of the 
scene graph using the tkinter GUI system. 
 
Requires Pmw.&quot;&quot;&quot;</span>

<span class="s1">__all__ </span><span class="s2">= [</span><span class="s3">'SceneGraphExplorer'</span><span class="s2">, </span><span class="s3">'SceneGraphExplorerItem'</span><span class="s2">, </span><span class="s3">'explore'</span><span class="s2">]</span>

<span class="s4">from </span><span class="s1">direct</span><span class="s2">.</span><span class="s1">showbase</span><span class="s2">.</span><span class="s1">DirectObject </span><span class="s4">import </span><span class="s1">DirectObject</span>
<span class="s4">from </span><span class="s1">direct</span><span class="s2">.</span><span class="s1">showbase</span><span class="s2">.</span><span class="s1">TkGlobal </span><span class="s4">import </span><span class="s2">*</span>
<span class="s4">from </span><span class="s2">.</span><span class="s1">Tree </span><span class="s4">import </span><span class="s2">*</span>
<span class="s4">import </span><span class="s1">Pmw</span>

<span class="s5"># changing these strings requires changing DirectSession.py SGE_ strs too!</span>
<span class="s1">DEFAULT_MENU_ITEMS </span><span class="s2">= [</span>
    <span class="s3">'Update Explorer'</span><span class="s2">,</span>
    <span class="s3">'Expand All'</span><span class="s2">,</span>
    <span class="s3">'Collapse All'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">,</span>
    <span class="s3">'Select'</span><span class="s2">, </span><span class="s3">'Deselect'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">,</span>
    <span class="s3">'Delete'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">,</span>
    <span class="s3">'Fit'</span><span class="s2">, </span><span class="s3">'Flash'</span><span class="s2">, </span><span class="s3">'Isolate'</span><span class="s2">, </span><span class="s3">'Toggle Vis'</span><span class="s2">, </span><span class="s3">'Show All'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">,</span>
    <span class="s3">'Set Reparent Target'</span><span class="s2">, </span><span class="s3">'Reparent'</span><span class="s2">, </span><span class="s3">'WRT Reparent'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">,</span>
    <span class="s3">'Place'</span><span class="s2">, </span><span class="s3">'Set Name'</span><span class="s2">, </span><span class="s3">'Set Color'</span><span class="s2">, </span><span class="s3">'Explore'</span><span class="s2">,</span>
    <span class="s3">'Separator'</span><span class="s2">]</span>

<span class="s4">class </span><span class="s1">SceneGraphExplorer</span><span class="s2">(</span><span class="s1">Pmw</span><span class="s2">.</span><span class="s1">MegaWidget</span><span class="s2">, </span><span class="s1">DirectObject</span><span class="s2">):</span>
    <span class="s0">&quot;Graphical display of a scene graph&quot;</span>
    <span class="s4">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent </span><span class="s2">= </span><span class="s4">None</span><span class="s2">, </span><span class="s1">nodePath </span><span class="s2">= </span><span class="s4">None</span><span class="s2">, </span><span class="s1">isItemEditable </span><span class="s2">= </span><span class="s4">True</span><span class="s2">, **</span><span class="s1">kw</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">nodePath </span><span class="s4">is None</span><span class="s2">:</span>
            <span class="s1">nodePath </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">render</span>

        <span class="s5"># Define the megawidget options.</span>
        <span class="s1">optiondefs </span><span class="s2">= (</span>
            <span class="s2">(</span><span class="s3">'menuItems'</span><span class="s2">,   [],   </span><span class="s1">Pmw</span><span class="s2">.</span><span class="s1">INITOPT</span><span class="s2">),</span>
            <span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">defineoptions</span><span class="s2">(</span><span class="s1">kw</span><span class="s2">, </span><span class="s1">optiondefs</span><span class="s2">)</span>

        <span class="s5"># Initialise superclass</span>
        <span class="s1">Pmw</span><span class="s2">.</span><span class="s1">MegaWidget</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">)</span>

        <span class="s5"># Initialize some class variables</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath </span><span class="s2">= </span><span class="s1">nodePath</span>

        <span class="s5"># Create the components.</span>

        <span class="s5"># Setup up container</span>
        <span class="s1">interior </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">interior</span><span class="s2">()</span>
        <span class="s1">interior</span><span class="s2">.</span><span class="s1">configure</span><span class="s2">(</span><span class="s1">relief </span><span class="s2">= </span><span class="s1">GROOVE</span><span class="s2">, </span><span class="s1">borderwidth </span><span class="s2">= </span><span class="s6">2</span><span class="s2">)</span>

        <span class="s5"># Create a label and an entry</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_scrolledCanvas </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">createcomponent</span><span class="s2">(</span>
            <span class="s3">'scrolledCanvas'</span><span class="s2">,</span>
            <span class="s2">(), </span><span class="s4">None</span><span class="s2">,</span>
            <span class="s1">Pmw</span><span class="s2">.</span><span class="s1">ScrolledCanvas</span><span class="s2">, (</span><span class="s1">interior</span><span class="s2">,),</span>
            <span class="s1">hull_width </span><span class="s2">= </span><span class="s6">200</span><span class="s2">, </span><span class="s1">hull_height </span><span class="s2">= </span><span class="s6">300</span><span class="s2">,</span>
            <span class="s1">usehullsize </span><span class="s2">= </span><span class="s6">1</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_scrolledCanvas</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s3">'canvas'</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">[</span><span class="s3">'scrollregion'</span><span class="s2">] = (</span><span class="s3">'0i'</span><span class="s2">, </span><span class="s3">'0i'</span><span class="s2">, </span><span class="s3">'2i'</span><span class="s2">, </span><span class="s3">'4i'</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_scrolledCanvas</span><span class="s2">.</span><span class="s1">resizescrollregion</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_scrolledCanvas</span><span class="s2">.</span><span class="s1">pack</span><span class="s2">(</span><span class="s1">padx </span><span class="s2">= </span><span class="s6">3</span><span class="s2">, </span><span class="s1">pady </span><span class="s2">= </span><span class="s6">3</span><span class="s2">, </span><span class="s1">expand</span><span class="s2">=</span><span class="s6">1</span><span class="s2">, </span><span class="s1">fill </span><span class="s2">= </span><span class="s1">BOTH</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s3">'&lt;ButtonPress-2&gt;'</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">mouse2Down</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s3">'&lt;B2-Motion&gt;'</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">mouse2Motion</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s3">'&lt;Configure&gt;'</span><span class="s2">,</span>
                          <span class="s4">lambda </span><span class="s1">e</span><span class="s2">, </span><span class="s1">sc </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_scrolledCanvas</span><span class="s2">:</span>
                          <span class="s1">sc</span><span class="s2">.</span><span class="s1">resizescrollregion</span><span class="s2">())</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">interior</span><span class="s2">().</span><span class="s1">bind</span><span class="s2">(</span><span class="s3">'&lt;Destroy&gt;'</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">onDestroy</span><span class="s2">)</span>

        <span class="s5"># Create the contents</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_treeItem </span><span class="s2">= </span><span class="s1">SceneGraphExplorerItem</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">, </span><span class="s1">isItemEditable</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node </span><span class="s2">= </span><span class="s1">TreeNode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">, </span><span class="s4">None</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_treeItem</span><span class="s2">,</span>
                              <span class="s1">DEFAULT_MENU_ITEMS </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'menuItems'</span><span class="s2">])</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">expand</span><span class="s2">()</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">_parentFrame </span><span class="s2">= </span><span class="s1">Frame</span><span class="s2">(</span><span class="s1">interior</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_label </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">createcomponent</span><span class="s2">(</span>
            <span class="s3">'parentLabel'</span><span class="s2">,</span>
            <span class="s2">(), </span><span class="s4">None</span><span class="s2">,</span>
            <span class="s1">Label</span><span class="s2">, (</span><span class="s1">interior</span><span class="s2">,),</span>
            <span class="s1">text </span><span class="s2">= </span><span class="s3">'Active Reparent Target: '</span><span class="s2">,</span>
            <span class="s1">anchor </span><span class="s2">= </span><span class="s1">W</span><span class="s2">, </span><span class="s1">justify </span><span class="s2">= </span><span class="s1">LEFT</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_label</span><span class="s2">.</span><span class="s1">pack</span><span class="s2">(</span><span class="s1">fill </span><span class="s2">= </span><span class="s1">X</span><span class="s2">)</span>

        <span class="s5"># Add update parent label</span>
        <span class="s4">def </span><span class="s1">updateLabel</span><span class="s2">(</span><span class="s1">nodePath </span><span class="s2">= </span><span class="s4">None</span><span class="s2">, </span><span class="s1">s </span><span class="s2">= </span><span class="s1">self</span><span class="s2">):</span>
            <span class="s1">s</span><span class="s2">.</span><span class="s1">_label</span><span class="s2">[</span><span class="s3">'text'</span><span class="s2">] = </span><span class="s3">'Active Reparent Target: ' </span><span class="s2">+ </span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">accept</span><span class="s2">(</span><span class="s3">'DIRECT_activeParent'</span><span class="s2">, </span><span class="s1">updateLabel</span><span class="s2">)</span>

        <span class="s5"># Add update hook</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">accept</span><span class="s2">(</span><span class="s3">'SGE_Update Explorer'</span><span class="s2">,</span>
                    <span class="s4">lambda </span><span class="s1">np</span><span class="s2">, </span><span class="s1">s </span><span class="s2">= </span><span class="s1">self</span><span class="s2">: </span><span class="s1">s</span><span class="s2">.</span><span class="s1">update</span><span class="s2">())</span>

        <span class="s5"># Check keywords and initialise options based on input values.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">initialiseoptions</span><span class="s2">(</span><span class="s1">SceneGraphExplorer</span><span class="s2">)</span>

    <span class="s5"># [gjeon] to set childrenTag and fModeChildrenTag of tree node</span>
    <span class="s4">def </span><span class="s1">setChildrenTag</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">tag</span><span class="s2">, </span><span class="s1">fModeChildrenTag</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">setChildrenTag</span><span class="s2">(</span><span class="s1">tag</span><span class="s2">, </span><span class="s1">fModeChildrenTag</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">update</span><span class="s2">()</span>

    <span class="s5"># [gjeon] to set fSortChildren of tree node</span>
    <span class="s4">def </span><span class="s1">setFSortChildren</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">fSortChildren</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">setFSortChildren</span><span class="s2">(</span><span class="s1">fSortChildren</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">update</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">update</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">fUseCachedChildren </span><span class="s2">= </span><span class="s6">1</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; Refresh scene graph explorer &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">update</span><span class="s2">(</span><span class="s1">fUseCachedChildren</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">mouse2Down</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">event</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_width </span><span class="s2">= </span><span class="s6">1.0 </span><span class="s2">* </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">winfo_width</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_height </span><span class="s2">= </span><span class="s6">1.0 </span><span class="s2">* </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">winfo_height</span><span class="s2">()</span>
        <span class="s1">xview </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">xview</span><span class="s2">()</span>
        <span class="s1">yview </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">yview</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_left </span><span class="s2">= </span><span class="s1">xview</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_top </span><span class="s2">= </span><span class="s1">yview</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_dxview </span><span class="s2">= </span><span class="s1">xview</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] - </span><span class="s1">xview</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_dyview </span><span class="s2">= </span><span class="s1">yview</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] - </span><span class="s1">yview</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_2lx </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">x</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_2ly </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">y</span>

    <span class="s4">def </span><span class="s1">mouse2Motion</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">event</span><span class="s2">):</span>
        <span class="s1">newx </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_left </span><span class="s2">- ((</span><span class="s1">event</span><span class="s2">.</span><span class="s1">x </span><span class="s2">- </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_2lx</span><span class="s2">)/</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_width</span><span class="s2">) * </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_dxview</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">xview_moveto</span><span class="s2">(</span><span class="s1">newx</span><span class="s2">)</span>
        <span class="s1">newy </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_top </span><span class="s2">- ((</span><span class="s1">event</span><span class="s2">.</span><span class="s1">y </span><span class="s2">- </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_2ly</span><span class="s2">)/</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_height</span><span class="s2">) * </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_dyview</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">yview_moveto</span><span class="s2">(</span><span class="s1">newy</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_2lx </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">x</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_2ly </span><span class="s2">= </span><span class="s1">event</span><span class="s2">.</span><span class="s1">y</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_left </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">xview</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_top </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_canvas</span><span class="s2">.</span><span class="s1">yview</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">]</span>

    <span class="s4">def </span><span class="s1">onDestroy</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">event</span><span class="s2">):</span>
        <span class="s5"># Remove hooks</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">ignore</span><span class="s2">(</span><span class="s3">'DIRECT_activeParent'</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">ignore</span><span class="s2">(</span><span class="s3">'SGE_Update Explorer'</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">updateSelection</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">searchKey</span><span class="s2">):</span>
        <span class="s5"># [gjeon] update SGE selection with directSession</span>
        <span class="s1">sceneGraphItem </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">_node</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s1">searchKey</span><span class="s2">)</span>
        <span class="s4">if </span><span class="s1">sceneGraphItem</span><span class="s2">:</span>
            <span class="s1">sceneGraphItem</span><span class="s2">.</span><span class="s1">reveal</span><span class="s2">()</span>
            <span class="s1">sceneGraphItem</span><span class="s2">.</span><span class="s1">select</span><span class="s2">()</span>

<span class="s4">class </span><span class="s1">SceneGraphExplorerItem</span><span class="s2">(</span><span class="s1">TreeItem</span><span class="s2">):</span>

    <span class="s0">&quot;&quot;&quot;Example TreeItem subclass -- browse the file system.&quot;&quot;&quot;</span>

    <span class="s4">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">nodePath</span><span class="s2">, </span><span class="s1">isItemEditable </span><span class="s2">= </span><span class="s4">True</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath </span><span class="s2">= </span><span class="s1">nodePath</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">isItemEditable </span><span class="s2">= </span><span class="s1">isItemEditable</span>

    <span class="s4">def </span><span class="s1">GetText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">type </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">node</span><span class="s2">().</span><span class="s1">getType</span><span class="s2">().</span><span class="s1">getName</span><span class="s2">()</span>
        <span class="s1">name </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">()</span>
        <span class="s4">return </span><span class="s1">type </span><span class="s2">+ </span><span class="s3">&quot;  &quot; </span><span class="s2">+ </span><span class="s1">name</span>

    <span class="s4">def </span><span class="s1">GetKey</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">hash</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">IsEditable</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s5"># All nodes' names can be edited nowadays.</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">isItemEditable</span>
        <span class="s5">#return issubclass(self.nodePath.node().__class__, NamedNode)</span>

    <span class="s4">def </span><span class="s1">SetText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">text</span><span class="s2">):</span>
        <span class="s4">try</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">setName</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>
        <span class="s4">except </span><span class="s1">AttributeError</span><span class="s2">:</span>
            <span class="s4">pass</span>

    <span class="s4">def </span><span class="s1">GetIconName</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s3">&quot;sphere2&quot; </span><span class="s5"># XXX wish there was a &quot;file&quot; icon</span>

    <span class="s4">def </span><span class="s1">IsExpandable</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">getNumChildren</span><span class="s2">() != </span><span class="s6">0</span>

    <span class="s4">def </span><span class="s1">GetSubList</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">sublist </span><span class="s2">= []</span>
        <span class="s4">for </span><span class="s1">nodePath </span><span class="s4">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">getChildren</span><span class="s2">():</span>
            <span class="s1">item </span><span class="s2">= </span><span class="s1">SceneGraphExplorerItem</span><span class="s2">(</span><span class="s1">nodePath</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">isItemEditable</span><span class="s2">)</span>
            <span class="s1">sublist</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">item</span><span class="s2">)</span>
        <span class="s4">return </span><span class="s1">sublist</span>

    <span class="s4">def </span><span class="s1">OnSelect</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">messenger</span><span class="s2">.</span><span class="s1">send</span><span class="s2">(</span><span class="s3">'SGE_Flash'</span><span class="s2">, [</span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">])</span>

    <span class="s4">def </span><span class="s1">MenuCommand</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">command</span><span class="s2">):</span>
        <span class="s1">messenger</span><span class="s2">.</span><span class="s1">send</span><span class="s2">(</span><span class="s3">'SGE_' </span><span class="s2">+ </span><span class="s1">command</span><span class="s2">, [</span><span class="s1">self</span><span class="s2">.</span><span class="s1">nodePath</span><span class="s2">])</span>


<span class="s4">def </span><span class="s1">explore</span><span class="s2">(</span><span class="s1">nodePath </span><span class="s2">= </span><span class="s4">None</span><span class="s2">):</span>
    <span class="s4">if </span><span class="s1">nodePath </span><span class="s4">is None</span><span class="s2">:</span>
        <span class="s1">nodePath </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">render</span>

    <span class="s1">tl </span><span class="s2">= </span><span class="s1">Toplevel</span><span class="s2">()</span>
    <span class="s1">tl</span><span class="s2">.</span><span class="s1">title</span><span class="s2">(</span><span class="s3">'Explore: ' </span><span class="s2">+ </span><span class="s1">nodePath</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">())</span>
    <span class="s1">sge </span><span class="s2">= </span><span class="s1">SceneGraphExplorer</span><span class="s2">(</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">tl</span><span class="s2">, </span><span class="s1">nodePath </span><span class="s2">= </span><span class="s1">nodePath</span><span class="s2">)</span>
    <span class="s1">sge</span><span class="s2">.</span><span class="s1">pack</span><span class="s2">(</span><span class="s1">expand </span><span class="s2">= </span><span class="s6">1</span><span class="s2">, </span><span class="s1">fill </span><span class="s2">= </span><span class="s3">'both'</span><span class="s2">)</span>
    <span class="s4">return </span><span class="s1">sge</span>
</pre>
</body>
</html>