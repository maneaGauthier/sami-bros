<html>
<head>
<title>DirectCheckButton.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #cf8e6d;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
DirectCheckButton.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;A DirectCheckButton is a type of button that toggles between two states 
when clicked.  It also has a separate indicator that can be modified 
separately. 
 
See the :ref:`directcheckbutton` page in the programming manual for a more 
in-depth explanation and an example of how to use this class. 
&quot;&quot;&quot;</span>

<span class="s1">__all__ </span><span class="s2">= [</span><span class="s3">'DirectCheckButton'</span><span class="s2">]</span>

<span class="s4">from </span><span class="s1">panda3d</span><span class="s2">.</span><span class="s1">core </span><span class="s4">import </span><span class="s2">*</span>
<span class="s4">from </span><span class="s2">.</span><span class="s1">DirectButton </span><span class="s4">import </span><span class="s2">*</span>
<span class="s4">from </span><span class="s2">.</span><span class="s1">DirectLabel </span><span class="s4">import </span><span class="s2">*</span>

<span class="s4">class </span><span class="s1">DirectCheckButton</span><span class="s2">(</span><span class="s1">DirectButton</span><span class="s2">):</span>
    <span class="s0">&quot;&quot;&quot; 
    DirectCheckButton(parent) - Create a DirectGuiWidget which responds 
    to mouse clicks by setting a state of on or off and execute a callback 
    function (passing that state through) if defined 
    &quot;&quot;&quot;</span>
    <span class="s4">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent </span><span class="s2">= </span><span class="s4">None</span><span class="s2">, **</span><span class="s1">kw</span><span class="s2">):</span>
        <span class="s5"># Inherits from DirectButton</span>
        <span class="s5"># A Direct Frame can have:</span>
        <span class="s5"># - A background texture (pass in path to image, or Texture Card)</span>
        <span class="s5"># - A midground geometry item (pass in geometry)</span>
        <span class="s5"># - A foreground text Node (pass in text string or Onscreen Text)</span>
        <span class="s5"># For a direct button:</span>
        <span class="s5"># Each button has 4 states (ready, press, rollover, disabled)</span>
        <span class="s5"># The same image/geom/text can be used for all four states or each</span>
        <span class="s5"># state can have a different text/geom/image</span>
        <span class="s5"># State transitions happen automatically based upon mouse interaction</span>
        <span class="s5"># Responds to click event and calls command if None</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">colors </span><span class="s2">= </span><span class="s4">None</span>
        <span class="s1">optiondefs </span><span class="s2">= (</span>
            <span class="s2">(</span><span class="s3">'indicatorValue'</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">setIndicatorValue</span><span class="s2">),</span>
            <span class="s5"># boxBorder defines the space created around the check box</span>
            <span class="s2">(</span><span class="s3">'boxBorder'</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s5"># boxPlacement maps left, above, right, below</span>
            <span class="s2">(</span><span class="s3">'boxPlacement'</span><span class="s2">, </span><span class="s3">'left'</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s2">(</span><span class="s3">'boxImage'</span><span class="s2">, </span><span class="s4">None</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s2">(</span><span class="s3">'boxImageScale'</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s2">(</span><span class="s3">'boxImageColor'</span><span class="s2">, </span><span class="s4">None</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s2">(</span><span class="s3">'boxRelief'</span><span class="s2">, </span><span class="s3">'sunken'</span><span class="s2">, </span><span class="s4">None</span><span class="s2">),</span>
            <span class="s2">)</span>
        <span class="s5"># Merge keyword options with default options</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">defineoptions</span><span class="s2">(</span><span class="s1">kw</span><span class="s2">, </span><span class="s1">optiondefs</span><span class="s2">)</span>
        <span class="s5"># Initialize superclasses</span>
        <span class="s1">DirectButton</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">indicator </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">createcomponent</span><span class="s2">(</span><span class="s3">&quot;indicator&quot;</span><span class="s2">, (), </span><span class="s4">None</span><span class="s2">,</span>
                                              <span class="s1">DirectLabel</span><span class="s2">, (</span><span class="s1">self</span><span class="s2">,),</span>
                                              <span class="s1">numStates </span><span class="s2">= </span><span class="s6">2</span><span class="s2">,</span>
                                              <span class="s1">image </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImage'</span><span class="s2">],</span>
                                              <span class="s1">image_scale </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImageScale'</span><span class="s2">],</span>
                                              <span class="s1">image_color </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImageColor'</span><span class="s2">],</span>
                                              <span class="s1">state </span><span class="s2">= </span><span class="s3">'disabled'</span><span class="s2">,</span>
                                              <span class="s1">text </span><span class="s2">= (</span><span class="s3">'X'</span><span class="s2">, </span><span class="s3">'X'</span><span class="s2">),</span>
                                              <span class="s1">relief </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxRelief'</span><span class="s2">],</span>
                                              <span class="s2">)</span>

        <span class="s5"># Call option initialization functions</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">initialiseoptions</span><span class="s2">(</span><span class="s1">DirectCheckButton</span><span class="s2">)</span>
        <span class="s5"># After initialization with X giving it the correct size, put back space</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImage'</span><span class="s2">] ==  </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'text'</span><span class="s2">] = (</span><span class="s3">' '</span><span class="s2">, </span><span class="s3">'*'</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'text_pos'</span><span class="s2">] = (</span><span class="s6">0</span><span class="s2">, -</span><span class="s6">.2</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'text'</span><span class="s2">] = (</span><span class="s3">' '</span><span class="s2">, </span><span class="s3">' '</span><span class="s2">)</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImageColor'</span><span class="s2">] != </span><span class="s4">None and </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImage'</span><span class="s2">] !=  </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">colors </span><span class="s2">= [</span><span class="s1">VBase4</span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">), </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxImageColor'</span><span class="s2">]]</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s3">'indicator'</span><span class="s2">)[</span><span class="s3">'image_color'</span><span class="s2">] = </span><span class="s1">VBase4</span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>

    <span class="s5"># Override the resetFrameSize of DirectGuiWidget inorder to provide space for label</span>
    <span class="s4">def </span><span class="s1">resetFrameSize</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">setFrameSize</span><span class="s2">(</span><span class="s1">fClearFrame </span><span class="s2">= </span><span class="s6">1</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setFrameSize</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">fClearFrame </span><span class="s2">= </span><span class="s6">0</span><span class="s2">):</span>

        <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'frameSize'</span><span class="s2">]:</span>
            <span class="s5"># Use user specified bounds</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'frameSize'</span><span class="s2">]</span>
            <span class="s1">frameType </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">getType</span><span class="s2">()</span>
            <span class="s1">ibw </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'borderWidth'</span><span class="s2">]</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s5"># Use ready state to compute bounds</span>
            <span class="s1">frameType </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">getType</span><span class="s2">()</span>
            <span class="s4">if </span><span class="s1">fClearFrame </span><span class="s4">and </span><span class="s2">(</span><span class="s1">frameType </span><span class="s2">!= </span><span class="s1">PGFrameStyle</span><span class="s2">.</span><span class="s1">TNone</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">setType</span><span class="s2">(</span><span class="s1">PGFrameStyle</span><span class="s2">.</span><span class="s1">TNone</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">guiItem</span><span class="s2">.</span><span class="s1">setFrameStyle</span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">])</span>
                <span class="s5"># To force an update of the button</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">guiItem</span><span class="s2">.</span><span class="s1">getStateDef</span><span class="s2">(</span><span class="s6">0</span><span class="s2">)</span>
            <span class="s5"># Clear out frame before computing bounds</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">getBounds</span><span class="s2">()</span>
            <span class="s5"># Restore frame style if necessary</span>
            <span class="s4">if </span><span class="s2">(</span><span class="s1">frameType </span><span class="s2">!= </span><span class="s1">PGFrameStyle</span><span class="s2">.</span><span class="s1">TNone</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">setType</span><span class="s2">(</span><span class="s1">frameType</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">guiItem</span><span class="s2">.</span><span class="s1">setFrameStyle</span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">frameStyle</span><span class="s2">[</span><span class="s6">0</span><span class="s2">])</span>

            <span class="s5"># Ok, they didn't set specific bounds,</span>
            <span class="s5">#  let's add room for the label indicator</span>
            <span class="s5">#  get the difference in height</span>

            <span class="s1">ibw </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'borderWidth'</span><span class="s2">]</span>
            <span class="s1">indicatorWidth </span><span class="s2">= (</span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">.</span><span class="s1">getWidth</span><span class="s2">() + (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]))</span>
            <span class="s1">indicatorHeight </span><span class="s2">= (</span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">.</span><span class="s1">getHeight</span><span class="s2">() + (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">1</span><span class="s2">]))</span>
            <span class="s1">diff </span><span class="s2">= (</span><span class="s1">indicatorHeight </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]) -</span>
                    <span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] - </span><span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">]))</span>
            <span class="s5"># If background is smaller then indicator, enlarge background</span>
            <span class="s4">if </span><span class="s1">diff </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s2">:</span>
                <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'left'</span><span class="s2">:            </span><span class="s5">#left</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] += -(</span><span class="s1">indicatorWidth </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]))</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] += </span><span class="s1">diff</span><span class="s2">/</span><span class="s6">2</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] -= </span><span class="s1">diff</span><span class="s2">/</span><span class="s6">2</span>
                <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'below'</span><span class="s2">:          </span><span class="s5">#below</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += -(</span><span class="s1">indicatorHeight</span><span class="s2">+(</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]))</span>
                <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'right'</span><span class="s2">:          </span><span class="s5">#right</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] += </span><span class="s1">indicatorWidth </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">])</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] += </span><span class="s1">diff</span><span class="s2">/</span><span class="s6">2</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] -= </span><span class="s1">diff</span><span class="s2">/</span><span class="s6">2</span>
                <span class="s4">else</span><span class="s2">:                                    </span><span class="s5">#above</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] += </span><span class="s1">indicatorHeight </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">])</span>

            <span class="s5"># Else make space on correct side for indicator</span>
            <span class="s4">else</span><span class="s2">:</span>
                <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'left'</span><span class="s2">:            </span><span class="s5">#left</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] += -(</span><span class="s1">indicatorWidth </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]))</span>
                <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'below'</span><span class="s2">:          </span><span class="s5">#below</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += -(</span><span class="s1">indicatorHeight </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]))</span>
                <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'right'</span><span class="s2">:          </span><span class="s5">#right</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] += </span><span class="s1">indicatorWidth </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">])</span>
                <span class="s4">else</span><span class="s2">:                                    </span><span class="s5">#above</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] += </span><span class="s1">indicatorHeight </span><span class="s2">+ (</span><span class="s6">2</span><span class="s2">*</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">])</span>

        <span class="s5"># Set frame to new dimensions</span>
        <span class="s4">if </span><span class="s2">((</span><span class="s1">frameType </span><span class="s2">!= </span><span class="s1">PGFrameStyle</span><span class="s2">.</span><span class="s1">TNone</span><span class="s2">) </span><span class="s4">and</span>
            <span class="s2">(</span><span class="s1">frameType </span><span class="s2">!= </span><span class="s1">PGFrameStyle</span><span class="s2">.</span><span class="s1">TFlat</span><span class="s2">)):</span>
            <span class="s1">bw </span><span class="s2">= </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'borderWidth'</span><span class="s2">]</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">bw </span><span class="s2">= (</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
        <span class="s5"># Set frame to new dimensions</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">guiItem</span><span class="s2">.</span><span class="s1">setFrame</span><span class="s2">(</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] - </span><span class="s1">bw</span><span class="s2">[</span><span class="s6">0</span><span class="s2">],</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] + </span><span class="s1">bw</span><span class="s2">[</span><span class="s6">0</span><span class="s2">],</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] - </span><span class="s1">bw</span><span class="s2">[</span><span class="s6">1</span><span class="s2">],</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] + </span><span class="s1">bw</span><span class="s2">[</span><span class="s6">1</span><span class="s2">])</span>

        <span class="s5"># If they didn't specify a position, put it in the center of new area</span>
        <span class="s4">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">[</span><span class="s3">'pos'</span><span class="s2">]:</span>
            <span class="s1">bbounds </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">bounds</span>
            <span class="s1">lbounds </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">.</span><span class="s1">bounds</span>
            <span class="s1">newpos </span><span class="s2">= [</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">]</span>

            <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'left'</span><span class="s2">:            </span><span class="s5">#left</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] += </span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] + </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">] + </span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
                <span class="s1">dropValue </span><span class="s2">= (</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]-</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]+</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">])/</span><span class="s6">2 </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += (</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] + </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">] -</span>
                              <span class="s1">dropValue</span><span class="s2">)</span>
            <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'right'</span><span class="s2">:            </span><span class="s5">#right</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">] += </span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">1</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">1</span><span class="s2">] - </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">] - </span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">0</span><span class="s2">]</span>
                <span class="s1">dropValue </span><span class="s2">= (</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]-</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]+</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">])/</span><span class="s6">2 </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += (</span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] + </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">]</span>
                              <span class="s2">- </span><span class="s1">dropValue</span><span class="s2">)</span>
            <span class="s4">elif </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxPlacement'</span><span class="s2">] == </span><span class="s3">'above'</span><span class="s2">:            </span><span class="s5">#above</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += </span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] - </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">] - </span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">1</span><span class="s2">]</span>
            <span class="s4">else</span><span class="s2">:                                      </span><span class="s5">#below</span>
                <span class="s1">newpos</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] += </span><span class="s1">bbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">]-</span><span class="s1">lbounds</span><span class="s2">[</span><span class="s6">2</span><span class="s2">] + </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'boxBorder'</span><span class="s2">] + </span><span class="s1">ibw</span><span class="s2">[</span><span class="s6">1</span><span class="s2">]</span>

            <span class="s1">self</span><span class="s2">.</span><span class="s1">indicator</span><span class="s2">.</span><span class="s1">setPos</span><span class="s2">(</span><span class="s1">newpos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">newpos</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">newpos</span><span class="s2">[</span><span class="s6">2</span><span class="s2">])</span>


    <span class="s4">def </span><span class="s1">commandFunc</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">event</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">] = </span><span class="s6">1 </span><span class="s2">- </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">]</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">colors </span><span class="s2">!= </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s3">'indicator'</span><span class="s2">)[</span><span class="s3">'image_color'</span><span class="s2">] = </span><span class="s1">self</span><span class="s2">.</span><span class="s1">colors</span><span class="s2">[</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">]]</span>

        <span class="s4">if </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'command'</span><span class="s2">]:</span>
            <span class="s5"># Pass any extra args to command</span>
            <span class="s1">self</span><span class="s2">[</span><span class="s3">'command'</span><span class="s2">](*[</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">]] + </span><span class="s1">self</span><span class="s2">[</span><span class="s3">'extraArgs'</span><span class="s2">])</span>

    <span class="s4">def </span><span class="s1">setIndicatorValue</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s3">'indicator'</span><span class="s2">).</span><span class="s1">guiItem</span><span class="s2">.</span><span class="s1">setState</span><span class="s2">(</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">])</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">colors </span><span class="s2">!= </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s3">'indicator'</span><span class="s2">)[</span><span class="s3">'image_color'</span><span class="s2">] = </span><span class="s1">self</span><span class="s2">.</span><span class="s1">colors</span><span class="s2">[</span><span class="s1">self</span><span class="s2">[</span><span class="s3">'indicatorValue'</span><span class="s2">]]</span>







</pre>
</body>
</html>