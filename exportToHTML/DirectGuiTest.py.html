<html>
<head>
<title>DirectGuiTest.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #6aab73;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
DirectGuiTest.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;Undocumented Module&quot;&quot;&quot;</span>

<span class="s1">__all__ </span><span class="s2">= []</span>


<span class="s3">if </span><span class="s1">__name__ </span><span class="s2">== </span><span class="s4">&quot;__main__&quot;</span><span class="s2">:</span>
    <span class="s3">from </span><span class="s1">direct</span><span class="s2">.</span><span class="s1">showbase</span><span class="s2">.</span><span class="s1">ShowBase </span><span class="s3">import </span><span class="s1">ShowBase</span>
    <span class="s3">from </span><span class="s2">. </span><span class="s3">import </span><span class="s1">DirectGuiGlobals</span>
    <span class="s3">from </span><span class="s2">.</span><span class="s1">DirectGui </span><span class="s3">import </span><span class="s2">*</span>
    <span class="s5">#from whrandom import *</span>
    <span class="s3">from </span><span class="s1">random </span><span class="s3">import </span><span class="s2">*</span>

    <span class="s1">base </span><span class="s2">= </span><span class="s1">ShowBase</span><span class="s2">()</span>

    <span class="s5"># EXAMPLE CODE</span>
    <span class="s5"># Load a model</span>
    <span class="s1">smiley </span><span class="s2">= </span><span class="s1">loader</span><span class="s2">.</span><span class="s1">loadModel</span><span class="s2">(</span><span class="s4">'models/misc/smiley'</span><span class="s2">)</span>

    <span class="s5"># Here we specify the button's command</span>
    <span class="s3">def </span><span class="s1">dummyCmd</span><span class="s2">(</span><span class="s1">index</span><span class="s2">):</span>
        <span class="s1">print</span><span class="s2">(</span><span class="s4">'Button %d POW!!!!' </span><span class="s2">% </span><span class="s1">index</span><span class="s2">)</span>

    <span class="s5"># Define some commands to bind to enter, exit and click events</span>
    <span class="s3">def </span><span class="s1">shrink</span><span class="s2">(</span><span class="s1">db</span><span class="s2">):</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'text2_text'</span><span class="s2">] = </span><span class="s4">'Hi!'</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'shrink'</span><span class="s2">)</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'expand'</span><span class="s2">)</span>
        <span class="s5"># Get a handle on the geometry for the rollover state</span>
        <span class="s1">rolloverSmiley </span><span class="s2">= </span><span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom2'</span><span class="s2">)</span>
        <span class="s1">rolloverSmiley</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom0'</span><span class="s2">).</span><span class="s1">getScale</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">])</span>
        <span class="s1">rolloverSmiley</span><span class="s2">.</span><span class="s1">lerpScale</span><span class="s2">(</span><span class="s6">.1</span><span class="s2">, </span><span class="s6">.1</span><span class="s2">, </span><span class="s6">.1</span><span class="s2">, </span><span class="s6">1.0</span><span class="s2">, </span><span class="s1">blendType </span><span class="s2">= </span><span class="s4">'easeInOut'</span><span class="s2">,</span>
                                 <span class="s1">task </span><span class="s2">= </span><span class="s4">'shrink'</span><span class="s2">)</span>

    <span class="s3">def </span><span class="s1">expand</span><span class="s2">(</span><span class="s1">db</span><span class="s2">):</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'text0_text'</span><span class="s2">] = </span><span class="s4">'Bye!'</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'shrink'</span><span class="s2">)</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'expand'</span><span class="s2">)</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom0'</span><span class="s2">).</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom2'</span><span class="s2">).</span><span class="s1">getScale</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">])</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom0'</span><span class="s2">).</span><span class="s1">lerpScale</span><span class="s2">(</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s1">blendType </span><span class="s2">= </span><span class="s4">'easeInOut'</span><span class="s2">,</span>
                                 <span class="s1">task </span><span class="s2">= </span><span class="s4">'expand'</span><span class="s2">)</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom2'</span><span class="s2">).</span><span class="s1">clearColor</span><span class="s2">()</span>

    <span class="s3">def </span><span class="s1">ouch</span><span class="s2">(</span><span class="s1">db</span><span class="s2">):</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'shrink'</span><span class="s2">)</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'expand'</span><span class="s2">)</span>
        <span class="s1">taskMgr</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s4">'runAway'</span><span class="s2">)</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom0'</span><span class="s2">).</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom2'</span><span class="s2">).</span><span class="s1">getScale</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">])</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom1'</span><span class="s2">).</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">db</span><span class="s2">.</span><span class="s1">component</span><span class="s2">(</span><span class="s4">'geom2'</span><span class="s2">).</span><span class="s1">getScale</span><span class="s2">()[</span><span class="s6">0</span><span class="s2">])</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'text2_text'</span><span class="s2">] = </span><span class="s4">'Ouch!'</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'geom2_color'</span><span class="s2">] = (</span><span class="s6">1</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
        <span class="s1">newX </span><span class="s2">= -</span><span class="s6">1.0 </span><span class="s2">+ </span><span class="s1">random</span><span class="s2">() * </span><span class="s6">2.0</span>
        <span class="s1">newZ </span><span class="s2">= -</span><span class="s6">1.0 </span><span class="s2">+ </span><span class="s1">random</span><span class="s2">() * </span><span class="s6">2.0</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">lerpPos</span><span class="s2">(</span><span class="s1">Point3</span><span class="s2">(</span><span class="s1">newX</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s1">newZ</span><span class="s2">), </span><span class="s6">1.0</span><span class="s2">, </span><span class="s1">task </span><span class="s2">= </span><span class="s4">'runAway'</span><span class="s2">,</span>
                   <span class="s1">blendType </span><span class="s2">= </span><span class="s4">'easeOut'</span><span class="s2">)</span>

    <span class="s1">dl </span><span class="s2">= </span><span class="s1">DirectFrame</span><span class="s2">(</span><span class="s1">image </span><span class="s2">= </span><span class="s4">'models/maps/noise.rgb'</span><span class="s2">)</span>
    <span class="s1">dl</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s6">.5</span><span class="s2">)</span>

    <span class="s5"># Create a button with a background image, smiley as a geometry element,</span>
    <span class="s5"># and a text overlay, set a different text for the four button states:</span>
    <span class="s5"># (normal, press, rollover, and disabled), set scale = .15, and relief raised</span>
    <span class="s1">dbArray </span><span class="s2">= []</span>
    <span class="s3">for </span><span class="s1">i </span><span class="s3">in </span><span class="s1">range</span><span class="s2">(</span><span class="s6">10</span><span class="s2">):</span>
        <span class="s1">db </span><span class="s2">= </span><span class="s1">DirectButton</span><span class="s2">(</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">dl</span><span class="s2">,</span>
                          <span class="s1">image </span><span class="s2">= </span><span class="s4">'models/maps/noise.rgb'</span><span class="s2">,</span>
                          <span class="s1">geom </span><span class="s2">= </span><span class="s1">smiley</span><span class="s2">,</span>
                          <span class="s1">text </span><span class="s2">= (</span><span class="s4">'Hi!'</span><span class="s2">, </span><span class="s4">'Ouch!'</span><span class="s2">, </span><span class="s4">'Bye!'</span><span class="s2">, </span><span class="s4">'ZZZZ!'</span><span class="s2">),</span>
                          <span class="s1">scale </span><span class="s2">= </span><span class="s6">.15</span><span class="s2">, </span><span class="s1">relief </span><span class="s2">= </span><span class="s4">'raised'</span><span class="s2">,</span>
                          <span class="s5"># Here we set an option for a component of the button</span>
                          <span class="s1">geom1_color </span><span class="s2">= (</span><span class="s6">1</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">),</span>
                          <span class="s5"># Here is an example of a component group option</span>
                          <span class="s1">text_pos </span><span class="s2">= (</span><span class="s6">.6</span><span class="s2">, -</span><span class="s6">.8</span><span class="s2">),</span>
                          <span class="s5"># Set audio characteristics</span>
                          <span class="s1">clickSound </span><span class="s2">= </span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">getDefaultClickSound</span><span class="s2">(),</span>
                          <span class="s1">rolloverSound </span><span class="s2">= </span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">getDefaultRolloverSound</span><span class="s2">()</span>
                          <span class="s2">)</span>

        <span class="s5"># You can set component or component group options after a gui item</span>
        <span class="s5"># has been created</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'text_scale'</span><span class="s2">] = </span><span class="s6">0.5</span>
        <span class="s1">db</span><span class="s2">[</span><span class="s4">'command'</span><span class="s2">] = </span><span class="s3">lambda </span><span class="s1">i </span><span class="s2">= </span><span class="s1">i</span><span class="s2">: </span><span class="s1">dummyCmd</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)</span>

        <span class="s5"># Bind the commands</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">ENTER</span><span class="s2">, </span><span class="s3">lambda </span><span class="s1">x</span><span class="s2">, </span><span class="s1">db </span><span class="s2">= </span><span class="s1">db</span><span class="s2">: </span><span class="s1">shrink</span><span class="s2">(</span><span class="s1">db</span><span class="s2">))</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">EXIT</span><span class="s2">, </span><span class="s3">lambda </span><span class="s1">x</span><span class="s2">, </span><span class="s1">db </span><span class="s2">= </span><span class="s1">db</span><span class="s2">: </span><span class="s1">expand</span><span class="s2">(</span><span class="s1">db</span><span class="s2">))</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">B1PRESS</span><span class="s2">, </span><span class="s3">lambda </span><span class="s1">x</span><span class="s2">, </span><span class="s1">db </span><span class="s2">= </span><span class="s1">db</span><span class="s2">: </span><span class="s1">ouch</span><span class="s2">(</span><span class="s1">db</span><span class="s2">))</span>
        <span class="s5"># Pop up placer when button 2 is pressed</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">bind</span><span class="s2">(</span><span class="s1">DirectGuiGlobals</span><span class="s2">.</span><span class="s1">B3PRESS</span><span class="s2">, </span><span class="s3">lambda </span><span class="s1">x</span><span class="s2">, </span><span class="s1">db </span><span class="s2">= </span><span class="s1">db</span><span class="s2">: </span><span class="s1">db</span><span class="s2">.</span><span class="s1">place</span><span class="s2">())</span>

        <span class="s1">dbArray</span><span class="s2">.</span><span class="s1">append</span><span class="s2">(</span><span class="s1">db</span><span class="s2">)</span>

        <span class="s5"># To get rid of button and clear out hooks call:</span>
        <span class="s5"># db.destroy()</span>

    <span class="s5"># DIRECT ENTRY EXAMPLE</span>
    <span class="s3">def </span><span class="s1">printEntryText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">):</span>
        <span class="s1">print</span><span class="s2">(</span><span class="s4">'Text: %s' </span><span class="s2">% (</span><span class="s1">text</span><span class="s2">))</span>

    <span class="s5"># Here we create an entry, and specify everything up front</span>
    <span class="s5"># CALL de1.get() and de1.set('new text') to get and set entry contents</span>
    <span class="s1">de1 </span><span class="s2">= </span><span class="s1">DirectEntry</span><span class="s2">(</span><span class="s1">initialText </span><span class="s2">= </span><span class="s4">'Hello, how are you?'</span><span class="s2">,</span>
                      <span class="s1">image </span><span class="s2">= </span><span class="s4">'models/maps/noise.rgb'</span><span class="s2">,</span>
                      <span class="s1">image_pos </span><span class="s2">= (</span><span class="s6">4.55</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, -</span><span class="s6">2.55</span><span class="s2">),</span>
                      <span class="s1">image_scale </span><span class="s2">= (</span><span class="s6">5.5</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">4</span><span class="s2">),</span>
                      <span class="s1">command </span><span class="s2">= </span><span class="s1">printEntryText</span><span class="s2">,</span>
                      <span class="s1">pos </span><span class="s2">= (-</span><span class="s6">1.1875</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0.879167</span><span class="s2">),</span>
                      <span class="s1">scale </span><span class="s2">= </span><span class="s6">0.0707855</span><span class="s2">,</span>
                      <span class="s1">cursorKeys </span><span class="s2">= </span><span class="s6">1</span><span class="s2">,</span>
                      <span class="s2">)</span>

    <span class="s5"># DIRECT DIALOG EXAMPLE</span>
    <span class="s3">def </span><span class="s1">printDialogValue</span><span class="s2">(</span><span class="s1">value</span><span class="s2">):</span>
        <span class="s1">print</span><span class="s2">(</span><span class="s4">'Value: %s' </span><span class="s2">% (</span><span class="s1">value</span><span class="s2">))</span>

    <span class="s1">simpleDialog </span><span class="s2">= </span><span class="s1">YesNoDialog</span><span class="s2">(</span><span class="s1">text </span><span class="s2">= </span><span class="s4">'Simple'</span><span class="s2">,</span>
                               <span class="s1">command </span><span class="s2">= </span><span class="s1">printDialogValue</span><span class="s2">)</span>

    <span class="s1">customValues </span><span class="s2">= </span><span class="s1">YesNoDialog</span><span class="s2">(</span><span class="s1">text </span><span class="s2">= </span><span class="s4">'Not Quite So Simple'</span><span class="s2">,</span>
                               <span class="s1">buttonValueList </span><span class="s2">= [</span><span class="s4">'Yes'</span><span class="s2">, </span><span class="s4">'No'</span><span class="s2">],</span>
                               <span class="s1">command </span><span class="s2">= </span><span class="s1">printDialogValue</span><span class="s2">)</span>


    <span class="s1">fancyDialog </span><span class="s2">= </span><span class="s1">YesNoDialog</span><span class="s2">(</span><span class="s1">text </span><span class="s2">= </span><span class="s4">'Testing Direct Dialog'</span><span class="s2">,</span>
                              <span class="s1">geom </span><span class="s2">= </span><span class="s1">smiley</span><span class="s2">,</span>
                              <span class="s1">geom_scale </span><span class="s2">= </span><span class="s6">.1</span><span class="s2">,</span>
                              <span class="s1">geom_pos </span><span class="s2">= (-</span><span class="s6">0.3</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">),</span>
                              <span class="s1">command </span><span class="s2">= </span><span class="s1">printDialogValue</span><span class="s2">)</span>

    <span class="s1">customDialog </span><span class="s2">= </span><span class="s1">DirectDialog</span><span class="s2">(</span><span class="s1">text </span><span class="s2">= </span><span class="s4">'Pick a number'</span><span class="s2">,</span>
                                <span class="s1">buttonTextList </span><span class="s2">= [</span><span class="s1">str</span><span class="s2">(</span><span class="s1">i</span><span class="s2">) </span><span class="s3">for </span><span class="s1">i </span><span class="s3">in </span><span class="s1">range</span><span class="s2">(</span><span class="s6">10</span><span class="s2">)],</span>
                                <span class="s1">buttonValueList </span><span class="s2">= </span><span class="s1">range</span><span class="s2">(</span><span class="s6">10</span><span class="s2">),</span>
                                <span class="s1">command </span><span class="s2">= </span><span class="s1">printDialogValue</span><span class="s2">)</span>



    <span class="s5"># NOTE: There are some utility functions which help you get size</span>
    <span class="s5"># of a direct gui widget.  These can be used to position and scale an</span>
    <span class="s5"># image after you've created the entry.  scale = (width/2, 1, height/2)</span>
    <span class="s1">print</span><span class="s2">(</span><span class="s4">'BOUNDS: %s' </span><span class="s2">% </span><span class="s1">de1</span><span class="s2">.</span><span class="s1">getBounds</span><span class="s2">())</span>
    <span class="s1">print</span><span class="s2">(</span><span class="s4">'WIDTH: %s' </span><span class="s2">% </span><span class="s1">de1</span><span class="s2">.</span><span class="s1">getWidth</span><span class="s2">())</span>
    <span class="s1">print</span><span class="s2">(</span><span class="s4">'HEIGHT: %s' </span><span class="s2">% </span><span class="s1">de1</span><span class="s2">.</span><span class="s1">getHeight</span><span class="s2">())</span>
    <span class="s1">print</span><span class="s2">(</span><span class="s4">'CENTER: %s' </span><span class="s2">% (</span><span class="s1">de1</span><span class="s2">.</span><span class="s1">getCenter</span><span class="s2">(),))</span>

    <span class="s1">base</span><span class="s2">.</span><span class="s1">run</span><span class="s2">()</span>
</pre>
</body>
</html>