<html>
<head>
<title>ObjectPalette.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ObjectPalette.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot; 
This is just a sample code. 
 
LevelEditor, ObjectHandler, ObjectPalette should be rewritten 
to be game specific. 
 
You can define object template class inheriting ObjectBase 
to define properties shared by multiple object types. 
When you are defining properties 
you should specify their name, UI type, data type, 
update function, default value, and value range. 
 
Then you need implement ObjectPalette class inheriting ObjectPaletteBase, 
and in the populate function you can define ObjectPalette tree structure. 
&quot;&quot;&quot;</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">ObjectPaletteBase </span><span class="s2">import </span><span class="s3">*</span>

<span class="s2">class </span><span class="s1">ObjectProp</span><span class="s3">(</span><span class="s1">ObjectBase</span><span class="s3">):</span>
    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">):</span>
        <span class="s1">ObjectBase</span><span class="s3">.</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s4">'Abc'</span><span class="s3">] =[</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_UI_RADIO</span><span class="s3">, </span><span class="s5"># UI type</span>
                                 <span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_STR</span><span class="s3">,      </span><span class="s5"># data type</span>
                                 <span class="s2">None</span><span class="s3">,             </span><span class="s5"># update function</span>
                                 <span class="s4">'a'</span><span class="s3">,              </span><span class="s5"># default value</span>
                                 <span class="s3">[</span><span class="s4">'a'</span><span class="s3">, </span><span class="s4">'b'</span><span class="s3">, </span><span class="s4">'c'</span><span class="s3">]]  </span><span class="s5"># value range</span>


<span class="s2">class </span><span class="s1">ObjectSmiley</span><span class="s3">(</span><span class="s1">ObjectProp</span><span class="s3">):</span>
    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">):</span>
        <span class="s1">ObjectProp</span><span class="s3">.</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s4">'123'</span><span class="s3">] = [</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_UI_COMBO</span><span class="s3">,</span>
                                  <span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_INT</span><span class="s3">,</span>
                                  <span class="s2">None</span><span class="s3">,</span>
                                  <span class="s6">1</span><span class="s3">,</span>
                                  <span class="s3">[</span><span class="s6">1</span><span class="s3">, </span><span class="s6">2</span><span class="s3">, </span><span class="s6">3</span><span class="s3">]]</span>


<span class="s2">class </span><span class="s1">ObjectDoubleSmileys</span><span class="s3">(</span><span class="s1">ObjectProp</span><span class="s3">):</span>
    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">):</span>
        <span class="s1">ObjectProp</span><span class="s3">.</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">args</span><span class="s3">, **</span><span class="s1">kw</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s4">'Distance'</span><span class="s3">] = [</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_UI_SLIDE</span><span class="s3">,</span>
                                                    <span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_FLOAT</span><span class="s3">,</span>
                                                    <span class="s3">(</span><span class="s4">'.updateDoubleSmiley'</span><span class="s3">,</span>
                                                     <span class="s3">{</span><span class="s4">'val'</span><span class="s3">:</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">ARG_VAL</span><span class="s3">, </span><span class="s4">'obj'</span><span class="s3">:</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">ARG_OBJ</span><span class="s3">}),</span>
                                                    <span class="s5"># In this case, an update function for property is defined</span>
                                                    <span class="s5"># so whenever you change the value of this property from UI</span>
                                                    <span class="s5"># this update function will be called with these arguments.</span>
                                                    <span class="s5"># OG.ARG_VAL will be replaced by the value from UI.</span>
                                                    <span class="s5"># OG.ARG_OBJ will be replaced by object data structure.</span>
                                                    <span class="s5"># When an update function is starting with .</span>
                                                    <span class="s5"># it means this function belongs to the default objectHandler.</span>
                                                    <span class="s6">1.0</span><span class="s3">, [</span><span class="s6">0</span><span class="s3">, </span><span class="s6">10</span><span class="s3">, </span><span class="s6">0.1</span><span class="s3">]]</span>


<span class="s2">class </span><span class="s1">ObjectPalette</span><span class="s3">(</span><span class="s1">ObjectPaletteBase</span><span class="s3">):</span>
    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">ObjectPaletteBase</span><span class="s3">.</span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">populate</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s5"># Create a group called 'Prop' in the ObjectPalette tree</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s4">'Prop'</span><span class="s3">)</span>

        <span class="s5"># Create a group called 'Double Smileys' under 'Prop' group</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s4">'Double Smileys'</span><span class="s3">, </span><span class="s4">'Prop'</span><span class="s3">)</span>

        <span class="s5"># Add an object type 'Smiley' which is inheriting ObjectSmiley template</span>
        <span class="s5"># and have following properties.</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ObjectSmiley</span><span class="s3">(</span><span class="s1">name</span><span class="s3">=</span><span class="s4">'Smiley'</span><span class="s3">,</span>
                              <span class="s1">model</span><span class="s3">=</span><span class="s4">'models/smiley.egg'</span><span class="s3">,</span>
                              <span class="s1">models</span><span class="s3">=[</span><span class="s4">'models/smiley.egg'</span><span class="s3">,</span>
                                      <span class="s4">'models/frowney.egg'</span><span class="s3">,</span>
                                      <span class="s4">'models/jack.egg'</span><span class="s3">],</span>
                              <span class="s5"># when an object is just a simple geometry, you can define</span>
                              <span class="s5"># model, and models like this</span>
                              <span class="s5"># instead of defining createFunction</span>
                              <span class="s1">properties</span><span class="s3">={</span><span class="s4">'Happy'</span><span class="s3">:[</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_UI_CHECK</span><span class="s3">,</span>
                                                   <span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_BOOL</span><span class="s3">,</span>
                                                   <span class="s2">None</span><span class="s3">,</span>
                                                   <span class="s2">True</span><span class="s3">],</span>
                                          <span class="s4">'Number'</span><span class="s3">:[</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_UI_SPIN</span><span class="s3">,</span>
                                                    <span class="s1">OG</span><span class="s3">.</span><span class="s1">PROP_INT</span><span class="s3">,</span>
                                                    <span class="s3">(</span><span class="s4">'.updateSmiley'</span><span class="s3">,</span>
                                                     <span class="s3">{</span><span class="s4">'val'</span><span class="s3">:</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">ARG_VAL</span><span class="s3">, </span><span class="s4">'obj'</span><span class="s3">:</span><span class="s1">OG</span><span class="s3">.</span><span class="s1">ARG_OBJ</span><span class="s3">}),</span>
                                                    <span class="s6">1</span><span class="s3">, [</span><span class="s6">1</span><span class="s3">, </span><span class="s6">10</span><span class="s3">]],</span>
                                        <span class="s3">}),</span>
                 <span class="s4">'Prop'</span><span class="s3">) </span><span class="s5"># This object type will be added under the 'Prop' group.</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ObjectDoubleSmileys</span><span class="s3">(</span><span class="s1">name</span><span class="s3">=</span><span class="s4">'H Double Smiley'</span><span class="s3">,</span>
                                     <span class="s1">createFunction </span><span class="s3">= (</span><span class="s4">'.createDoubleSmiley'</span><span class="s3">, {})),</span>
                                     <span class="s5"># When the createFunction is defined like this,</span>
                                     <span class="s5"># this function will be called to create the object.</span>
                                     <span class="s5"># When a create function is starting with .</span>
                                     <span class="s5"># it means this function belongs to the default objectHandler.</span>
                 <span class="s4">'Double Smileys'</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ObjectDoubleSmileys</span><span class="s3">(</span><span class="s1">name</span><span class="s3">=</span><span class="s4">'V Double Smiley'</span><span class="s3">,</span>
                                     <span class="s1">createFunction </span><span class="s3">= (</span><span class="s4">'.createDoubleSmiley'</span><span class="s3">, {</span><span class="s4">'horizontal'</span><span class="s3">:</span><span class="s2">False</span><span class="s3">})),</span>
                                     <span class="s5"># You can specify argument for the create function, too</span>
                 <span class="s4">'Double Smileys'</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s4">'Animal'</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ObjectBase</span><span class="s3">(</span><span class="s1">name</span><span class="s3">=</span><span class="s4">'Panda'</span><span class="s3">,</span>
                            <span class="s1">createFunction </span><span class="s3">= (</span><span class="s4">'.createPanda'</span><span class="s3">, {}),</span>
                            <span class="s1">anims </span><span class="s3">= [</span><span class="s4">'models/panda-walk4.egg'</span><span class="s3">,],</span>
                            <span class="s1">properties </span><span class="s3">= {}),</span>
                 <span class="s4">'Animal'</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s4">'BG'</span><span class="s3">)</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">ObjectBase</span><span class="s3">(</span><span class="s1">name</span><span class="s3">=</span><span class="s4">'Grass'</span><span class="s3">,</span>
                            <span class="s1">createFunction </span><span class="s3">= (</span><span class="s4">'.createGrass'</span><span class="s3">, {}),</span>
                            <span class="s1">properties </span><span class="s3">= {}),</span>
                 <span class="s4">'BG'</span><span class="s3">)</span>
</pre>
</body>
</html>