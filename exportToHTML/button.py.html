<html>
<head>
<title>button.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
button.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">ursina </span><span class="s0">import </span><span class="s1">Entity</span><span class="s2">, </span><span class="s1">Text</span><span class="s2">, </span><span class="s1">camera</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">mouse</span><span class="s2">, </span><span class="s1">BoxCollider</span><span class="s2">, </span><span class="s1">Sequence</span><span class="s2">, </span><span class="s1">Func</span><span class="s2">, </span><span class="s1">Vec2</span><span class="s2">, </span><span class="s1">Vec3</span><span class="s2">, </span><span class="s1">scene</span><span class="s2">, </span><span class="s1">Default</span>
<span class="s0">from </span><span class="s1">ursina</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">procedural</span><span class="s2">.</span><span class="s1">quad </span><span class="s0">import </span><span class="s1">Quad</span>
<span class="s0">import </span><span class="s1">textwrap</span>

<span class="s0">from </span><span class="s1">ursina</span><span class="s2">.</span><span class="s1">scripts</span><span class="s2">.</span><span class="s1">property_generator </span><span class="s0">import </span><span class="s1">generate_properties_for_class</span>
<span class="s2">@</span><span class="s1">generate_properties_for_class</span><span class="s2">()</span>
<span class="s0">class </span><span class="s1">Button</span><span class="s2">(</span><span class="s1">Entity</span><span class="s2">):</span>

    <span class="s1">default_color </span><span class="s2">= </span><span class="s1">color</span><span class="s2">.</span><span class="s1">black90</span>
    <span class="s1">default_model </span><span class="s2">= </span><span class="s0">None </span><span class="s3"># will default to rounded Quad</span>

    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">text</span><span class="s2">=</span><span class="s4">''</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">=</span><span class="s1">camera</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">, </span><span class="s1">model</span><span class="s2">=</span><span class="s1">Default</span><span class="s2">, </span><span class="s1">radius</span><span class="s2">=</span><span class="s5">.1</span><span class="s2">, </span><span class="s1">origin</span><span class="s2">=(</span><span class="s5">0</span><span class="s2">,</span><span class="s5">0</span><span class="s2">), </span><span class="s1">text_origin</span><span class="s2">=(</span><span class="s5">0</span><span class="s2">,</span><span class="s5">0</span><span class="s2">), </span><span class="s1">text_size</span><span class="s2">=</span><span class="s5">1</span><span class="s2">, </span><span class="s1">color</span><span class="s2">=</span><span class="s1">Default</span><span class="s2">, </span><span class="s1">collider</span><span class="s2">=</span><span class="s4">'box'</span><span class="s2">, </span><span class="s1">highlight_scale</span><span class="s2">=</span><span class="s5">1</span><span class="s2">, </span><span class="s1">pressed_scale</span><span class="s2">=</span><span class="s5">1</span><span class="s2">, </span><span class="s1">disabled</span><span class="s2">=</span><span class="s0">False</span><span class="s2">, **</span><span class="s1">kwargs</span><span class="s2">):</span>
        <span class="s1">super</span><span class="s2">().</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">=</span><span class="s1">camera</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">parent</span>

        <span class="s0">for </span><span class="s1">key </span><span class="s0">in </span><span class="s2">(</span><span class="s4">'scale'</span><span class="s2">, </span><span class="s4">'scale_x'</span><span class="s2">, </span><span class="s4">'scale_y'</span><span class="s2">, </span><span class="s4">'scale_z'</span><span class="s2">, </span><span class="s4">'world_scale'</span><span class="s2">, </span><span class="s4">'world_scale_x'</span><span class="s2">, </span><span class="s4">'world_scale_y'</span><span class="s2">, </span><span class="s4">'world_scale_z'</span><span class="s2">):</span>
            <span class="s0">if </span><span class="s1">key </span><span class="s0">in </span><span class="s1">kwargs</span><span class="s2">:   </span><span class="s3"># set the scale before model for correct corners</span>
                <span class="s1">setattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">kwargs</span><span class="s2">[</span><span class="s1">key</span><span class="s2">])</span>

        <span class="s0">if </span><span class="s1">model </span><span class="s2">== </span><span class="s1">Default</span><span class="s2">:</span>
            <span class="s0">if not </span><span class="s1">Button</span><span class="s2">.</span><span class="s1">default_model</span><span class="s2">:</span>
                <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale</span><span class="s2">[</span><span class="s5">0</span><span class="s2">] != </span><span class="s5">0 </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale</span><span class="s2">[</span><span class="s5">1</span><span class="s2">] != </span><span class="s5">0</span><span class="s2">:</span>
                    <span class="s1">self</span><span class="s2">.</span><span class="s1">model </span><span class="s2">= </span><span class="s1">Quad</span><span class="s2">(</span><span class="s1">aspect</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale</span><span class="s2">[</span><span class="s5">0</span><span class="s2">] / </span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale</span><span class="s2">[</span><span class="s5">1</span><span class="s2">], </span><span class="s1">radius</span><span class="s2">=</span><span class="s1">radius</span><span class="s2">)</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model </span><span class="s2">= </span><span class="s1">Button</span><span class="s2">.</span><span class="s1">default_model</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">model </span><span class="s2">= </span><span class="s1">model</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">origin </span><span class="s2">= </span><span class="s1">origin</span>

        <span class="s0">if </span><span class="s1">color </span><span class="s2">== </span><span class="s1">Default</span><span class="s2">:</span>
            <span class="s1">color </span><span class="s2">= </span><span class="s1">Button</span><span class="s2">.</span><span class="s1">default_color</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">color </span><span class="s2">= </span><span class="s1">color</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_color </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">color</span><span class="s2">.</span><span class="s1">tint</span><span class="s2">(</span><span class="s5">.2</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">pressed_color </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">color</span><span class="s2">.</span><span class="s1">tint</span><span class="s2">(-</span><span class="s5">.2</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale </span><span class="s2">= </span><span class="s1">highlight_scale    </span><span class="s3"># multiplier</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">pressed_scale </span><span class="s2">= </span><span class="s1">pressed_scale     </span><span class="s3"># multiplier</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">collider </span><span class="s2">= </span><span class="s1">collider</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">disabled </span><span class="s2">= </span><span class="s1">disabled</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_origin </span><span class="s2">= </span><span class="s1">text_origin</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity </span><span class="s2">= </span><span class="s0">None</span>
        <span class="s0">if </span><span class="s1">text</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text </span><span class="s2">= </span><span class="s1">text</span>

        <span class="s0">for </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value </span><span class="s0">in </span><span class="s1">kwargs</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s1">setattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">)</span>


    <span class="s0">def </span><span class="s1">text_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">text</span>
        <span class="s0">return </span><span class="s4">''</span>

    <span class="s0">def </span><span class="s1">text_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s0">if not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">str</span><span class="s2">):</span>
            <span class="s0">raise </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">'Text must be a string'</span><span class="s2">)</span>

        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity </span><span class="s2">= </span><span class="s1">Text</span><span class="s2">(</span><span class="s1">text</span><span class="s2">=</span><span class="s1">value</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">, </span><span class="s1">position</span><span class="s2">=</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_origin</span><span class="s2">[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_origin</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],-</span><span class="s5">.01</span><span class="s2">), </span><span class="s1">origin</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_origin</span><span class="s2">, </span><span class="s1">add_to_scene_entities</span><span class="s2">=</span><span class="s0">False</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_scale </span><span class="s2">= </span><span class="s1">Vec3</span><span class="s2">(</span><span class="s5">20 </span><span class="s2">* </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_size</span><span class="s2">)</span>

        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">text </span><span class="s2">= </span><span class="s1">value</span>


    <span class="s0">def </span><span class="s1">text_origin_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">origin</span>

        <span class="s0">return </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'_text_origin'</span><span class="s2">, (</span><span class="s5">0</span><span class="s2">,</span><span class="s5">0</span><span class="s2">))</span>

    <span class="s0">def </span><span class="s1">text_origin_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_text_origin </span><span class="s2">= </span><span class="s1">value</span>
        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s0">return</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">origin </span><span class="s2">= </span><span class="s1">value</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">position </span><span class="s2">= </span><span class="s1">value</span>
        <span class="s3"># self.text_entity.x += self.model.radius * self.scale_y/self.scale_x * (-value[0]*2)</span>
        <span class="s3"># self.text_entity.y += self.model.radius * self.scale_y/self.scale_x * (-value[1]*2)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">origin </span><span class="s2">= </span><span class="s1">value</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span>

    <span class="s0">def </span><span class="s1">text_color_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">color</span>

    <span class="s0">def </span><span class="s1">text_color_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">color </span><span class="s2">= </span><span class="s1">value</span>

    <span class="s0">def </span><span class="s1">icon_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">getattr</span><span class="s2">(</span><span class="s4">'icon_entity'</span><span class="s2">, </span><span class="s0">None</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">icon_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">value </span><span class="s0">and not </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'icon_entity'</span><span class="s2">):</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">icon_entity </span><span class="s2">= </span><span class="s1">Entity</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">, </span><span class="s1">name</span><span class="s2">=</span><span class="s4">f'button_icon_entity_</span><span class="s0">{</span><span class="s1">value</span><span class="s0">}</span><span class="s4">'</span><span class="s2">, </span><span class="s1">model</span><span class="s2">=</span><span class="s4">'quad'</span><span class="s2">, </span><span class="s1">z</span><span class="s2">=-</span><span class="s5">.1</span><span class="s2">, </span><span class="s1">add_to_scene_entities</span><span class="s2">=</span><span class="s0">False</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">icon_entity</span><span class="s2">.</span><span class="s1">texture </span><span class="s2">= </span><span class="s1">value</span>

    <span class="s0">def </span><span class="s1">icon_world_scale_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">icon</span><span class="s2">:</span>
            <span class="s0">return None</span>
        <span class="s0">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">icon_entity</span><span class="s2">.</span><span class="s1">world_scale</span>

    <span class="s0">def </span><span class="s1">icon_world_scale_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">icon</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">icon_entity</span><span class="s2">.</span><span class="s1">world_scale </span><span class="s2">= </span><span class="s1">value</span>

    <span class="s0">def </span><span class="s1">text_size_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'_text_size'</span><span class="s2">, </span><span class="s5">1</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">text_size_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">_text_size </span><span class="s2">= </span><span class="s1">value</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_scale </span><span class="s2">= </span><span class="s1">Vec3</span><span class="s2">(</span><span class="s1">value </span><span class="s2">* </span><span class="s5">20</span><span class="s2">)</span>


    <span class="s0">def </span><span class="s1">origin_getter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">return </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'_origin'</span><span class="s2">, </span><span class="s1">Vec3</span><span class="s2">.</span><span class="s1">zero</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">origin_setter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'text_entity'</span><span class="s2">) </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span>
            <span class="s1">super</span><span class="s2">().</span><span class="s1">origin_setter</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">super</span><span class="s2">().</span><span class="s1">origin_setter</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>

        <span class="s0">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">collider</span><span class="s2">, </span><span class="s1">BoxCollider</span><span class="s2">):    </span><span class="s3"># update collider position by making a new one</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">collider </span><span class="s2">= </span><span class="s4">'box'</span>



    <span class="s0">def </span><span class="s1">input</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">key</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">disabled </span><span class="s0">or not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">:</span>
            <span class="s0">return</span>

        <span class="s0">if </span><span class="s1">key </span><span class="s2">== </span><span class="s4">'left mouse down'</span><span class="s2">:</span>
            <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">hovered</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setColorScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">pressed_color</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">pressed_scale</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">pressed_scale</span><span class="s2">, </span><span class="s5">1</span><span class="s2">))</span>

        <span class="s0">if </span><span class="s1">key </span><span class="s2">== </span><span class="s4">'left mouse up'</span><span class="s2">:</span>
            <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">hovered</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setColorScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_color</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale</span><span class="s2">, </span><span class="s5">1</span><span class="s2">))</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setColorScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">color</span><span class="s2">)</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s5">1</span><span class="s2">,</span><span class="s5">1</span><span class="s2">,</span><span class="s5">1</span><span class="s2">))</span>


    <span class="s0">def </span><span class="s1">on_mouse_enter</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">disabled </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setColorScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_color</span><span class="s2">)</span>

            <span class="s0">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale </span><span class="s2">!= </span><span class="s5">1</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale</span><span class="s2">, </span><span class="s5">1</span><span class="s2">))</span>

        <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'tooltip'</span><span class="s2">) </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">tooltip</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">tooltip</span><span class="s2">.</span><span class="s1">enabled </span><span class="s2">= </span><span class="s0">True</span>


    <span class="s0">def </span><span class="s1">on_mouse_exit</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">disabled </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setColorScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">color</span><span class="s2">)</span>

            <span class="s0">if not </span><span class="s1">mouse</span><span class="s2">.</span><span class="s1">left </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">highlight_scale </span><span class="s2">!= </span><span class="s5">1</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">(</span><span class="s5">1</span><span class="s2">,</span><span class="s5">1</span><span class="s2">,</span><span class="s5">1</span><span class="s2">))</span>

        <span class="s0">if </span><span class="s1">hasattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s4">'tooltip'</span><span class="s2">) </span><span class="s0">and </span><span class="s1">self</span><span class="s2">.</span><span class="s1">tooltip</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">tooltip</span><span class="s2">.</span><span class="s1">enabled </span><span class="s2">= </span><span class="s0">False</span>


    <span class="s0">def </span><span class="s1">fit_to_text</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">radius</span><span class="s2">=</span><span class="s5">.1</span><span class="s2">, </span><span class="s1">padding</span><span class="s2">=</span><span class="s1">Vec2</span><span class="s2">(</span><span class="s1">Text</span><span class="s2">.</span><span class="s1">size</span><span class="s2">*</span><span class="s5">1.5</span><span class="s2">, </span><span class="s1">Text</span><span class="s2">.</span><span class="s1">size</span><span class="s2">)):</span>
        <span class="s0">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity </span><span class="s0">or not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">text </span><span class="s0">or </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">text </span><span class="s2">== </span><span class="s4">''</span><span class="s2">:</span>
            <span class="s0">return</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">scene</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">original_parent </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">parent</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">scale </span><span class="s2">= </span><span class="s1">Vec2</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">width</span><span class="s2">*</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_scale_x</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">height</span><span class="s2">*</span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_scale_y</span><span class="s2">) * </span><span class="s1">Text</span><span class="s2">.</span><span class="s1">size </span><span class="s2">* </span><span class="s5">2</span>
        <span class="s3"># self.scale = Vec2(self.text_entity.width, self.text_entity.height) * Text.size * 2</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">scale </span><span class="s2">+= </span><span class="s1">Vec2</span><span class="s2">(*</span><span class="s1">padding</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">position </span><span class="s2">+= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">text_origin </span><span class="s2">* </span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale</span><span class="s2">.</span><span class="s1">xy </span><span class="s2">* </span><span class="s5">.5</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">model </span><span class="s2">= </span><span class="s1">Quad</span><span class="s2">(</span><span class="s1">aspect</span><span class="s2">=</span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale_x</span><span class="s2">/</span><span class="s1">self</span><span class="s2">.</span><span class="s1">scale_y</span><span class="s2">, </span><span class="s1">radius</span><span class="s2">=</span><span class="s1">radius</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">original_parent</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">.</span><span class="s1">world_parent </span><span class="s2">= </span><span class="s1">self</span>



<span class="s0">if </span><span class="s1">__name__ </span><span class="s2">== </span><span class="s4">'__main__'</span><span class="s2">:</span>
    <span class="s0">from </span><span class="s1">ursina </span><span class="s0">import </span><span class="s1">Ursina</span><span class="s2">, </span><span class="s1">application</span><span class="s2">, </span><span class="s1">Tooltip</span>
    <span class="s1">app </span><span class="s2">= </span><span class="s1">Ursina</span><span class="s2">()</span>

    <span class="s1">Button</span><span class="s2">.</span><span class="s1">default_color </span><span class="s2">= </span><span class="s1">color</span><span class="s2">.</span><span class="s1">red</span>
    <span class="s1">Button</span><span class="s2">(</span><span class="s1">model</span><span class="s2">=</span><span class="s4">'quad'</span><span class="s2">, </span><span class="s1">scale</span><span class="s2">=</span><span class="s5">.05</span><span class="s2">, </span><span class="s1">x</span><span class="s2">=-</span><span class="s5">.5</span><span class="s2">, </span><span class="s1">color</span><span class="s2">=</span><span class="s1">color</span><span class="s2">.</span><span class="s1">lime</span><span class="s2">, </span><span class="s1">text</span><span class="s2">=</span><span class="s4">'text scale</span><span class="s0">\n</span><span class="s4">test'</span><span class="s2">, </span><span class="s1">text_size</span><span class="s2">=</span><span class="s5">.5</span><span class="s2">, </span><span class="s1">text_color</span><span class="s2">=</span><span class="s1">color</span><span class="s2">.</span><span class="s1">black</span><span class="s2">)</span>


    <span class="s1">b </span><span class="s2">= </span><span class="s1">Button</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">=</span><span class="s1">camera</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">, </span><span class="s1">text</span><span class="s2">=</span><span class="s4">'hello world!'</span><span class="s2">, </span><span class="s1">scale</span><span class="s2">=</span><span class="s5">.25</span><span class="s2">)</span>
    <span class="s1">Button</span><span class="s2">.</span><span class="s1">default_color </span><span class="s2">= </span><span class="s1">color</span><span class="s2">.</span><span class="s1">blue</span>
    <span class="s1">b </span><span class="s2">= </span><span class="s1">Button</span><span class="s2">(</span><span class="s1">text</span><span class="s2">=</span><span class="s4">'hello world!'</span><span class="s2">, </span><span class="s1">icon</span><span class="s2">=</span><span class="s4">'sword'</span><span class="s2">, </span><span class="s1">scale</span><span class="s2">=</span><span class="s5">.25</span><span class="s2">, </span><span class="s1">text_origin</span><span class="s2">=(-</span><span class="s5">.5</span><span class="s2">,</span><span class="s5">0</span><span class="s2">), </span><span class="s1">x</span><span class="s2">=</span><span class="s5">.5</span><span class="s2">)</span>
    <span class="s3"># b.fit_to_text()</span>
    <span class="s1">b</span><span class="s2">.</span><span class="s1">on_click </span><span class="s2">= </span><span class="s1">application</span><span class="s2">.</span><span class="s1">quit </span><span class="s3"># assign a function to the button.</span>
    <span class="s1">b</span><span class="s2">.</span><span class="s1">tooltip </span><span class="s2">= </span><span class="s1">Tooltip</span><span class="s2">(</span><span class="s4">'exit'</span><span class="s2">)</span>

    <span class="s1">par </span><span class="s2">= </span><span class="s1">Entity</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">=</span><span class="s1">camera</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">, </span><span class="s1">scale</span><span class="s2">=</span><span class="s5">.2</span><span class="s2">, </span><span class="s1">y</span><span class="s2">=-</span><span class="s5">.2</span><span class="s2">)</span>
    <span class="s1">b </span><span class="s2">= </span><span class="s1">Button</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">=</span><span class="s1">par</span><span class="s2">, </span><span class="s1">text</span><span class="s2">=</span><span class="s4">'test'</span><span class="s2">, </span><span class="s1">scale_x</span><span class="s2">=</span><span class="s5">1</span><span class="s2">, </span><span class="s1">origin</span><span class="s2">=(-</span><span class="s5">.5</span><span class="s2">,</span><span class="s5">.5</span><span class="s2">))</span>
    <span class="s1">b</span><span class="s2">.</span><span class="s1">text </span><span class="s2">=</span><span class="s4">'new text'</span>
    <span class="s1">print</span><span class="s2">(</span><span class="s1">b</span><span class="s2">.</span><span class="s1">text_entity</span><span class="s2">)</span>

    <span class="s3"># Entity(model='quad', parent=b, x=1)</span>
    <span class="s1">Text</span><span class="s2">(</span><span class="s4">'Text size</span><span class="s0">\n</span><span class="s4">reference'</span><span class="s2">, </span><span class="s1">x</span><span class="s2">=</span><span class="s5">.15</span><span class="s2">)</span>
    <span class="s3"># b.eternal = True</span>
    <span class="s0">def </span><span class="s1">input</span><span class="s2">(</span><span class="s1">key</span><span class="s2">):</span>

        <span class="s0">if </span><span class="s1">key </span><span class="s2">== </span><span class="s4">'d'</span><span class="s2">:</span>
            <span class="s1">scene</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">()</span>

        <span class="s0">if </span><span class="s1">key </span><span class="s2">== </span><span class="s4">'space'</span><span class="s2">:</span>
            <span class="s1">b</span><span class="s2">.</span><span class="s1">text </span><span class="s2">= </span><span class="s4">'updated text'</span>


    <span class="s1">app</span><span class="s2">.</span><span class="s1">run</span><span class="s2">()</span>
</pre>
</body>
</html>