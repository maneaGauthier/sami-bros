<html>
<head>
<title>OnscreenText.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #cf8e6d;}
.s5 { color: #7a7e85;}
.s6 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
OnscreenText.py</font>
</center></td></tr></table>
<pre><span class="s0">&quot;&quot;&quot;OnscreenText module: contains the OnscreenText class. 
 
See the :ref:`onscreentext` page in the programming manual for explanation of 
this class. 
&quot;&quot;&quot;</span>

<span class="s1">__all__ </span><span class="s2">= [</span><span class="s3">'OnscreenText'</span><span class="s2">, </span><span class="s3">'Plain'</span><span class="s2">, </span><span class="s3">'ScreenTitle'</span><span class="s2">, </span><span class="s3">'ScreenPrompt'</span><span class="s2">, </span><span class="s3">'NameConfirm'</span><span class="s2">, </span><span class="s3">'BlackOnWhite'</span><span class="s2">]</span>

<span class="s4">from </span><span class="s1">panda3d</span><span class="s2">.</span><span class="s1">core </span><span class="s4">import </span><span class="s2">*</span>
<span class="s4">from </span><span class="s2">. </span><span class="s4">import </span><span class="s1">DirectGuiGlobals </span><span class="s4">as </span><span class="s1">DGG</span>
<span class="s4">import </span><span class="s1">sys</span>

<span class="s5">## These are the styles of text we might commonly see.  They set the</span>
<span class="s5">## overall appearance of the text according to one of a number of</span>
<span class="s5">## pre-canned styles.  You can further customize the appearance of the</span>
<span class="s5">## text by specifying individual parameters as well.</span>
<span class="s1">Plain </span><span class="s2">= </span><span class="s6">1</span>
<span class="s1">ScreenTitle </span><span class="s2">= </span><span class="s6">2</span>
<span class="s1">ScreenPrompt </span><span class="s2">= </span><span class="s6">3</span>
<span class="s1">NameConfirm </span><span class="s2">= </span><span class="s6">4</span>
<span class="s1">BlackOnWhite </span><span class="s2">= </span><span class="s6">5</span>

<span class="s4">class </span><span class="s1">OnscreenText</span><span class="s2">(</span><span class="s1">NodePath</span><span class="s2">):</span>

    <span class="s4">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">text </span><span class="s2">= </span><span class="s3">''</span><span class="s2">,</span>
                 <span class="s1">style </span><span class="s2">= </span><span class="s1">Plain</span><span class="s2">,</span>
                 <span class="s1">pos </span><span class="s2">= (</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">),</span>
                 <span class="s1">roll </span><span class="s2">= </span><span class="s6">0</span><span class="s2">,</span>
                 <span class="s1">scale </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">fg </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">bg </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">shadow </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">shadowOffset </span><span class="s2">= (</span><span class="s6">0.04</span><span class="s2">, </span><span class="s6">0.04</span><span class="s2">),</span>
                 <span class="s1">frame </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">align </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">wordwrap </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">drawOrder </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">decal </span><span class="s2">= </span><span class="s6">0</span><span class="s2">,</span>
                 <span class="s1">font </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">parent </span><span class="s2">= </span><span class="s4">None</span><span class="s2">,</span>
                 <span class="s1">sort </span><span class="s2">= </span><span class="s6">0</span><span class="s2">,</span>
                 <span class="s1">mayChange </span><span class="s2">= </span><span class="s4">True</span><span class="s2">,</span>
                 <span class="s1">direction </span><span class="s2">= </span><span class="s4">None</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Make a text node from string, put it into the 2d sg and set it 
        up with all the indicated parameters. 
 
        Parameters: 
 
          text: the actual text to display.  This may be omitted and 
              specified later via setText() if you don't have it 
              available, but it is better to specify it up front. 
 
          style: one of the pre-canned style parameters defined at the 
              head of this file.  This sets up the default values for 
              many of the remaining parameters if they are 
              unspecified; however, a parameter may still be specified 
              to explicitly set it, overriding the pre-canned style. 
 
          pos: the x, y position of the text on the screen. 
 
          scale: the size of the text.  This may either be a single 
              float (and it will usually be a small number like 0.07) 
              or it may be a 2-tuple of floats, specifying a different 
              x, y scale. 
 
          fg: the (r, g, b, a) foreground color of the text.  This is 
              normally a 4-tuple of floats or ints. 
 
          bg: the (r, g, b, a) background color of the text.  If the 
              fourth value, a, is nonzero, a card is created to place 
              behind the text and set to the given color. 
 
          shadow: the (r, g, b, a) color of the shadow behind the text. 
              If the fourth value, a, is nonzero, a little drop shadow 
              is created and placed behind the text. 
 
          frame: the (r, g, b, a) color of the frame drawn around the 
              text.  If the fourth value, a, is nonzero, a frame is 
              created around the text. 
 
          align: one of TextNode.ALeft, TextNode.ARight, or TextNode.ACenter. 
 
          wordwrap: either the width to wordwrap the text at, or None 
              to specify no automatic word wrapping. 
 
          drawOrder: the drawing order of this text with respect to 
              all other things in the 'fixed' bin within render2d. 
              The text will actually use drawOrder through drawOrder + 
              2. 
 
          decal: if this is True, the text is decalled onto its 
              background card.  Useful when the text will be parented 
              into the 3-D scene graph. 
 
          font: the font to use for the text. 
 
          parent: the NodePath to parent the text to initially. 
 
          mayChange: pass true if the text or its properties may need 
              to be changed at runtime, false if it is static once 
              created (which leads to better memory optimization). 
 
          direction: this can be set to 'ltr' or 'rtl' to override the 
              direction of the text. 
        &quot;&quot;&quot;</span>
        <span class="s4">if </span><span class="s1">parent </span><span class="s4">is None</span><span class="s2">:</span>
            <span class="s4">from </span><span class="s1">direct</span><span class="s2">.</span><span class="s1">showbase </span><span class="s4">import </span><span class="s1">ShowBaseGlobal</span>
            <span class="s1">parent </span><span class="s2">= </span><span class="s1">ShowBaseGlobal</span><span class="s2">.</span><span class="s1">aspect2d</span>

        <span class="s5"># make a text node</span>
        <span class="s1">textNode </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">(</span><span class="s3">''</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode </span><span class="s2">= </span><span class="s1">textNode</span>

        <span class="s5"># We ARE a node path.  Initially, we're an empty node path.</span>
        <span class="s1">NodePath</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span>

        <span class="s5"># Choose the default parameters according to the selected</span>
        <span class="s5"># style.</span>
        <span class="s4">if </span><span class="s1">style </span><span class="s2">== </span><span class="s1">Plain</span><span class="s2">:</span>
            <span class="s1">scale </span><span class="s2">= </span><span class="s1">scale </span><span class="s4">or </span><span class="s6">0.07</span>
            <span class="s1">fg </span><span class="s2">= </span><span class="s1">fg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">bg </span><span class="s2">= </span><span class="s1">bg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">shadow </span><span class="s2">= </span><span class="s1">shadow </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">frame </span><span class="s2">= </span><span class="s1">frame </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s4">if </span><span class="s1">align </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
                <span class="s1">align </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">.</span><span class="s1">ACenter</span>
        <span class="s4">elif </span><span class="s1">style </span><span class="s2">== </span><span class="s1">ScreenTitle</span><span class="s2">:</span>
            <span class="s1">scale </span><span class="s2">= </span><span class="s1">scale </span><span class="s4">or </span><span class="s6">0.15</span>
            <span class="s1">fg </span><span class="s2">= </span><span class="s1">fg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">1</span><span class="s2">, </span><span class="s6">0.2</span><span class="s2">, </span><span class="s6">0.2</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">bg </span><span class="s2">= </span><span class="s1">bg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">shadow </span><span class="s2">= </span><span class="s1">shadow </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">frame </span><span class="s2">= </span><span class="s1">frame </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s4">if </span><span class="s1">align </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
                <span class="s1">align </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">.</span><span class="s1">ACenter</span>
        <span class="s4">elif </span><span class="s1">style </span><span class="s2">== </span><span class="s1">ScreenPrompt</span><span class="s2">:</span>
            <span class="s1">scale </span><span class="s2">= </span><span class="s1">scale </span><span class="s4">or </span><span class="s6">0.1</span>
            <span class="s1">fg </span><span class="s2">= </span><span class="s1">fg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">bg </span><span class="s2">= </span><span class="s1">bg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">shadow </span><span class="s2">= </span><span class="s1">shadow </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">frame </span><span class="s2">= </span><span class="s1">frame </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s4">if </span><span class="s1">align </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
                <span class="s1">align </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">.</span><span class="s1">ACenter</span>
        <span class="s4">elif </span><span class="s1">style </span><span class="s2">== </span><span class="s1">NameConfirm</span><span class="s2">:</span>
            <span class="s1">scale </span><span class="s2">= </span><span class="s1">scale </span><span class="s4">or </span><span class="s6">0.1</span>
            <span class="s1">fg </span><span class="s2">= </span><span class="s1">fg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">bg </span><span class="s2">= </span><span class="s1">bg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">shadow </span><span class="s2">= </span><span class="s1">shadow </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">frame </span><span class="s2">= </span><span class="s1">frame </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s4">if </span><span class="s1">align </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
                <span class="s1">align </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">.</span><span class="s1">ACenter</span>
        <span class="s4">elif </span><span class="s1">style </span><span class="s2">== </span><span class="s1">BlackOnWhite</span><span class="s2">:</span>
            <span class="s1">scale </span><span class="s2">= </span><span class="s1">scale </span><span class="s4">or </span><span class="s6">0.1</span>
            <span class="s1">fg </span><span class="s2">= </span><span class="s1">fg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">bg </span><span class="s2">= </span><span class="s1">bg </span><span class="s4">or </span><span class="s2">(</span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">, </span><span class="s6">1</span><span class="s2">)</span>
            <span class="s1">shadow </span><span class="s2">= </span><span class="s1">shadow </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s1">frame </span><span class="s2">= </span><span class="s1">frame </span><span class="s4">or </span><span class="s2">(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">, </span><span class="s6">0</span><span class="s2">)</span>
            <span class="s4">if </span><span class="s1">align </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
                <span class="s1">align </span><span class="s2">= </span><span class="s1">TextNode</span><span class="s2">.</span><span class="s1">ACenter</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s4">raise </span><span class="s1">ValueError</span>

        <span class="s4">if not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">scale</span><span class="s2">, </span><span class="s1">tuple</span><span class="s2">):</span>
            <span class="s5"># If the scale is already a tuple, it's a 2-d (x, y) scale.</span>
            <span class="s5"># Otherwise, it's a uniform scale--make it a tuple.</span>
            <span class="s1">scale </span><span class="s2">= (</span><span class="s1">scale</span><span class="s2">, </span><span class="s1">scale</span><span class="s2">)</span>

        <span class="s5"># Save some of the parameters for posterity.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= </span><span class="s1">scale</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__pos </span><span class="s2">= </span><span class="s1">pos</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__roll </span><span class="s2">= </span><span class="s1">roll</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__wordwrap </span><span class="s2">= </span><span class="s1">wordwrap</span>

        <span class="s4">if </span><span class="s1">decal</span><span class="s2">:</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardDecal</span><span class="s2">(</span><span class="s6">1</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">font </span><span class="s2">== </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">font </span><span class="s2">= </span><span class="s1">DGG</span><span class="s2">.</span><span class="s1">getDefaultFont</span><span class="s2">()</span>

        <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">font</span><span class="s2">)</span>
        <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setTextColor</span><span class="s2">(</span><span class="s1">fg</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
        <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setAlign</span><span class="s2">(</span><span class="s1">align</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">wordwrap</span><span class="s2">:</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setWordwrap</span><span class="s2">(</span><span class="s1">wordwrap</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a background color, create a card.</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardColor</span><span class="s2">(</span><span class="s1">bg</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardAsMargin</span><span class="s2">(</span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a shadow color, create a shadow.</span>
            <span class="s5"># Can't use the *shadow interface because it might be a VBase4.</span>
            <span class="s5">#textNode.setShadowColor(*shadow)</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setShadowColor</span><span class="s2">(</span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setShadow</span><span class="s2">(*</span><span class="s1">shadowOffset</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a frame color, create a frame.</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFrameColor</span><span class="s2">(</span><span class="s1">frame</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFrameAsMargin</span><span class="s2">(</span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">direction </span><span class="s4">is not None</span><span class="s2">:</span>
            <span class="s4">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">direction</span><span class="s2">, </span><span class="s1">str</span><span class="s2">):</span>
                <span class="s1">direction </span><span class="s2">= </span><span class="s1">direction</span><span class="s2">.</span><span class="s1">lower</span><span class="s2">()</span>
                <span class="s4">if </span><span class="s1">direction </span><span class="s2">== </span><span class="s3">'rtl'</span><span class="s2">:</span>
                    <span class="s1">direction </span><span class="s2">= </span><span class="s1">TextProperties</span><span class="s2">.</span><span class="s1">D_rtl</span>
                <span class="s4">elif </span><span class="s1">direction </span><span class="s2">== </span><span class="s3">'ltr'</span><span class="s2">:</span>
                    <span class="s1">direction </span><span class="s2">= </span><span class="s1">TextProperties</span><span class="s2">.</span><span class="s1">D_ltr</span>
                <span class="s4">else</span><span class="s2">:</span>
                    <span class="s4">raise </span><span class="s1">ValueError</span><span class="s2">(</span><span class="s3">'invalid direction'</span><span class="s2">)</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setDirection</span><span class="s2">(</span><span class="s1">direction</span><span class="s2">)</span>

        <span class="s5"># Create a transform for the text for our scale and position.</span>
        <span class="s5"># We'd rather do it here, on the text itself, rather than on</span>
        <span class="s5"># our NodePath, so we have one fewer transforms in the scene</span>
        <span class="s5"># graph.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

        <span class="s4">if </span><span class="s1">drawOrder </span><span class="s2">!= </span><span class="s4">None</span><span class="s2">:</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setBin</span><span class="s2">(</span><span class="s3">'fixed'</span><span class="s2">)</span>
            <span class="s1">textNode</span><span class="s2">.</span><span class="s1">setDrawOrder</span><span class="s2">(</span><span class="s1">drawOrder</span><span class="s2">)</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>
        <span class="s4">if not </span><span class="s1">text</span><span class="s2">:</span>
            <span class="s5"># If we don't have any text, assume we'll be changing it later.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">mayChange </span><span class="s2">= </span><span class="s6">1</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">mayChange </span><span class="s2">= </span><span class="s1">mayChange</span>

        <span class="s5"># Ok, now update the node.</span>
        <span class="s4">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">mayChange</span><span class="s2">:</span>
            <span class="s5"># If we aren't going to change the text later, we can</span>
            <span class="s5"># throw away the TextNode.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode </span><span class="s2">= </span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">generate</span><span class="s2">()</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">isClean </span><span class="s2">= </span><span class="s6">0</span>

        <span class="s5"># Set ourselves up as the NodePath that points to this node.</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">assign</span><span class="s2">(</span><span class="s1">parent</span><span class="s2">.</span><span class="s1">attachNewNode</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">, </span><span class="s1">sort</span><span class="s2">))</span>

    <span class="s4">def </span><span class="s1">cleanup</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode </span><span class="s2">= </span><span class="s4">None</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">isClean </span><span class="s2">== </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">isClean </span><span class="s2">= </span><span class="s6">1</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">removeNode</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">destroy</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">cleanup</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">freeze</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">pass</span>

    <span class="s4">def </span><span class="s1">thaw</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">pass</span>

    <span class="s5"># Allow changing of several of the parameters after the text has</span>
    <span class="s5"># been created.  These should be used with caution; it is better</span>
    <span class="s5"># to set all the parameters up front.  These functions are</span>
    <span class="s5"># primarily intended for interactive placement of the initial</span>
    <span class="s5"># text, and for those rare occasions when you actually want to</span>
    <span class="s5"># change a text's property after it has been created.</span>

    <span class="s4">def </span><span class="s1">setDecal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">decal</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardDecal</span><span class="s2">(</span><span class="s1">decal</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">getDecal</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getCardDecal</span><span class="s2">()</span>

    <span class="s1">decal </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getDecal</span><span class="s2">, </span><span class="s1">setDecal</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">font</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">font</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">getFont</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getFont</span><span class="s2">()</span>

    <span class="s1">font </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getFont</span><span class="s2">, </span><span class="s1">setFont</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">clearText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">clearText</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">setText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">text</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">0</span><span class="s2">):</span>
            <span class="s4">assert not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText </span><span class="s2">= </span><span class="s4">True</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText </span><span class="s2">= </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">unicode</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setWtext</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">appendText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">text</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">sys</span><span class="s2">.</span><span class="s1">version_info </span><span class="s2">&gt;= (</span><span class="s6">3</span><span class="s2">, </span><span class="s6">0</span><span class="s2">):</span>
            <span class="s4">assert not </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">bytes</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText </span><span class="s2">= </span><span class="s4">True</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText </span><span class="s2">= </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">text</span><span class="s2">, </span><span class="s1">unicode</span><span class="s2">)</span>

        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">appendWtext</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">appendText</span><span class="s2">(</span><span class="s1">text</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">getText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">unicodeText</span><span class="s2">:</span>
            <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getWtext</span><span class="s2">()</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getText</span><span class="s2">()</span>

    <span class="s1">text </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getText</span><span class="s2">, </span><span class="s1">setText</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setTextX</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">x</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">setTextPos</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">1</span><span class="s2">])</span>

    <span class="s4">def </span><span class="s1">setX</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">x</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. deprecated:: 1.11.0 
           Use `.setTextX()` method instead. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">setTextPos</span><span class="s2">(</span><span class="s1">x</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">1</span><span class="s2">])</span>

    <span class="s4">def </span><span class="s1">setTextY</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">y</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">setTextPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">y</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setY</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">y</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. deprecated:: 1.11.0 
           Use `.setTextY()` method instead. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">setTextPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">y</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setTextPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">=</span><span class="s4">None</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        Position the onscreen text in 2d screen space 
 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s4">if </span><span class="s1">y </span><span class="s4">is None</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">__pos </span><span class="s2">= </span><span class="s1">tuple</span><span class="s2">(</span><span class="s1">x</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">__pos </span><span class="s2">= (</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getTextPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span>

    <span class="s1">text_pos </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getTextPos</span><span class="s2">, </span><span class="s1">setTextPos</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot;setPos(self, float, float) 
        Position the onscreen text in 2d screen space 
 
        .. deprecated:: 1.11.0 
           Use `.setTextPos()` method or `.text_pos` property instead. 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__pos </span><span class="s2">= (</span><span class="s1">x</span><span class="s2">, </span><span class="s1">y</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getPos</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. deprecated:: 1.11.0 
           Use `.getTextPos()` method or `.text_pos` property instead. 
        &quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span>

    <span class="s1">pos </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getPos</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setTextR</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">r</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot;setTextR(self, float) 
        Rotates the text around the screen's normal. 
 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__roll </span><span class="s2">= -</span><span class="s1">r</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getTextR</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s2">-</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__roll</span>

    <span class="s1">text_r </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getTextR</span><span class="s2">, </span><span class="s1">setTextR</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setRoll</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">roll</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot;setRoll(self, float) 
        Rotate the onscreen text around the screen's normal. 
 
        .. deprecated:: 1.11.0 
           Use ``setTextR(-roll)`` instead (note the negated sign). 
        &quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__roll </span><span class="s2">= </span><span class="s1">roll</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getRoll</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. deprecated:: 1.11.0 
           Use ``-getTextR()`` instead (note the negated sign). 
        &quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__roll</span>

    <span class="s1">roll </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getRoll</span><span class="s2">, </span><span class="s1">setRoll</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setTextScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sy </span><span class="s2">= </span><span class="s4">None</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot;setTextScale(self, float, float) 
        Scale the text in 2d space.  You may specify either a single 
        uniform scale, or two scales, or a tuple of two scales. 
 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>

        <span class="s4">if </span><span class="s1">sy </span><span class="s4">is None</span><span class="s2">:</span>
            <span class="s4">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">tuple</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= </span><span class="s1">sx</span>
            <span class="s4">else</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= (</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sx</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= (</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sy</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getTextScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. versionadded:: 1.10.8 
        &quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__scale</span>

    <span class="s1">text_scale </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getTextScale</span><span class="s2">, </span><span class="s1">setTextScale</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sy </span><span class="s2">= </span><span class="s4">None</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot;setScale(self, float, float) 
        Scale the text in 2d space.  You may specify either a single 
        uniform scale, or two scales, or a tuple of two scales. 
 
        .. deprecated:: 1.11.0 
           Use `.setTextScale()` method or `.text_scale` property instead. 
        &quot;&quot;&quot;</span>

        <span class="s4">if </span><span class="s1">sy </span><span class="s4">is None</span><span class="s2">:</span>
            <span class="s4">if </span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">tuple</span><span class="s2">):</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= </span><span class="s1">sx</span>
            <span class="s4">else</span><span class="s2">:</span>
                <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= (</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sx</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">__scale </span><span class="s2">= (</span><span class="s1">sx</span><span class="s2">, </span><span class="s1">sy</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateTransformMat</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getScale</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s0">&quot;&quot;&quot; 
        .. deprecated:: 1.11.0 
           Use `.getTextScale()` method or `.text_scale` property instead. 
        &quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__scale</span>

    <span class="s1">scale </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getScale</span><span class="s2">, </span><span class="s1">setScale</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">updateTransformMat</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">assert</span><span class="s2">(</span><span class="s1">isinstance</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">, </span><span class="s1">TextNode</span><span class="s2">))</span>
        <span class="s1">mat </span><span class="s2">= (</span>
            <span class="s1">Mat4</span><span class="s2">.</span><span class="s1">scaleMat</span><span class="s2">(</span><span class="s1">Vec3</span><span class="s2">.</span><span class="s1">rfu</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__scale</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s6">1</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__scale</span><span class="s2">[</span><span class="s6">1</span><span class="s2">])) *</span>
            <span class="s1">Mat4</span><span class="s2">.</span><span class="s1">rotateMat</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__roll</span><span class="s2">, </span><span class="s1">Vec3</span><span class="s2">.</span><span class="s1">back</span><span class="s2">()) *</span>
            <span class="s1">Mat4</span><span class="s2">.</span><span class="s1">translateMat</span><span class="s2">(</span><span class="s1">Point3</span><span class="s2">.</span><span class="s1">rfu</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s6">0</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__pos</span><span class="s2">[</span><span class="s6">1</span><span class="s2">]))</span>
            <span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setTransform</span><span class="s2">(</span><span class="s1">mat</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setWordwrap</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">wordwrap</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">__wordwrap </span><span class="s2">= </span><span class="s1">wordwrap</span>

        <span class="s4">if </span><span class="s1">wordwrap</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setWordwrap</span><span class="s2">(</span><span class="s1">wordwrap</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">clearWordwrap</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">getWordwrap</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">__wordwrap</span>

    <span class="s1">wordwrap </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">getWordwrap</span><span class="s2">, </span><span class="s1">setWordwrap</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">__getFg</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getTextColor</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">setFg</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">fg</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setTextColor</span><span class="s2">(</span><span class="s1">fg</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">fg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>

    <span class="s1">fg </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">__getFg</span><span class="s2">, </span><span class="s1">setFg</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">__getBg</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">hasCard</span><span class="s2">():</span>
            <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getCardColor</span><span class="s2">()</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s4">return </span><span class="s1">LColor</span><span class="s2">(</span><span class="s6">0</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">setBg</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">bg</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a background color, create a card.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardColor</span><span class="s2">(</span><span class="s1">bg</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">bg</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setCardAsMargin</span><span class="s2">(</span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s5"># Otherwise, remove the card.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">clearCard</span><span class="s2">()</span>

    <span class="s1">bg </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">__getBg</span><span class="s2">, </span><span class="s1">setBg</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">__getShadow</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getShadowColor</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">setShadow</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">shadow</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a shadow color, create a shadow.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setShadowColor</span><span class="s2">(</span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">shadow</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setShadow</span><span class="s2">(</span><span class="s6">0.04</span><span class="s2">, </span><span class="s6">0.04</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s5"># Otherwise, remove the shadow.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">clearShadow</span><span class="s2">()</span>

    <span class="s1">shadow </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">__getShadow</span><span class="s2">, </span><span class="s1">setShadow</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">__getFrame</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getFrameColor</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">setFrame</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">frame</span><span class="s2">):</span>
        <span class="s4">if </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">3</span><span class="s2">] != </span><span class="s6">0</span><span class="s2">:</span>
            <span class="s5"># If we have a frame color, create a frame.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFrameColor</span><span class="s2">(</span><span class="s1">frame</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">1</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">2</span><span class="s2">], </span><span class="s1">frame</span><span class="s2">[</span><span class="s6">3</span><span class="s2">])</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setFrameAsMargin</span><span class="s2">(</span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">, </span><span class="s6">0.1</span><span class="s2">)</span>
        <span class="s4">else</span><span class="s2">:</span>
            <span class="s5"># Otherwise, remove the frame.</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">clearFrame</span><span class="s2">()</span>

    <span class="s1">frame </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">__getFrame</span><span class="s2">, </span><span class="s1">setFrame</span><span class="s2">)</span>

    <span class="s4">def </span><span class="s1">configure</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">option</span><span class="s2">=</span><span class="s4">None</span><span class="s2">, **</span><span class="s1">kw</span><span class="s2">):</span>
        <span class="s5"># These is for compatibility with DirectGui functions</span>
        <span class="s4">if not </span><span class="s1">self</span><span class="s2">.</span><span class="s1">mayChange</span><span class="s2">:</span>
            <span class="s1">print</span><span class="s2">(</span><span class="s3">'OnscreenText.configure: mayChange == 0'</span><span class="s2">)</span>
            <span class="s4">return</span>
        <span class="s4">for </span><span class="s1">option</span><span class="s2">, </span><span class="s1">value </span><span class="s4">in </span><span class="s1">kw</span><span class="s2">.</span><span class="s1">items</span><span class="s2">():</span>
            <span class="s5"># Use option string to access setter function</span>
            <span class="s4">try</span><span class="s2">:</span>
                <span class="s1">setter </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s3">'set' </span><span class="s2">+ </span><span class="s1">option</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">upper</span><span class="s2">() + </span><span class="s1">option</span><span class="s2">[</span><span class="s6">1</span><span class="s2">:])</span>
                <span class="s4">if </span><span class="s1">setter </span><span class="s2">== </span><span class="s1">self</span><span class="s2">.</span><span class="s1">setPos</span><span class="s2">:</span>
                    <span class="s1">setter</span><span class="s2">(</span><span class="s1">value</span><span class="s2">[</span><span class="s6">0</span><span class="s2">], </span><span class="s1">value</span><span class="s2">[</span><span class="s6">1</span><span class="s2">])</span>
                <span class="s4">else</span><span class="s2">:</span>
                    <span class="s1">setter</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)</span>
            <span class="s4">except </span><span class="s1">AttributeError</span><span class="s2">:</span>
                <span class="s1">print</span><span class="s2">(</span><span class="s3">'OnscreenText.configure: invalid option: %s' </span><span class="s2">% </span><span class="s1">option</span><span class="s2">)</span>

    <span class="s5"># Allow index style references</span>
    <span class="s4">def </span><span class="s1">__setitem__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">configure</span><span class="s2">(*(), **{</span><span class="s1">key</span><span class="s2">: </span><span class="s1">value</span><span class="s2">})</span>

    <span class="s4">def </span><span class="s1">cget</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">option</span><span class="s2">):</span>
        <span class="s5"># Get current configuration setting.</span>
        <span class="s5"># This is for compatibility with DirectGui functions</span>
        <span class="s1">getter </span><span class="s2">= </span><span class="s1">getattr</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s3">'get' </span><span class="s2">+ </span><span class="s1">option</span><span class="s2">[</span><span class="s6">0</span><span class="s2">].</span><span class="s1">upper</span><span class="s2">() + </span><span class="s1">option</span><span class="s2">[</span><span class="s6">1</span><span class="s2">:])</span>
        <span class="s4">return </span><span class="s1">getter</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">__getAlign</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s4">return </span><span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">getAlign</span><span class="s2">()</span>

    <span class="s4">def </span><span class="s1">setAlign</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">align</span><span class="s2">):</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">textNode</span><span class="s2">.</span><span class="s1">setAlign</span><span class="s2">(</span><span class="s1">align</span><span class="s2">)</span>

    <span class="s1">align </span><span class="s2">= </span><span class="s1">property</span><span class="s2">(</span><span class="s1">__getAlign</span><span class="s2">, </span><span class="s1">setAlign</span><span class="s2">)</span>

    <span class="s5"># Allow index style refererences</span>
    <span class="s1">__getitem__ </span><span class="s2">= </span><span class="s1">cget</span>

</pre>
</body>
</html>