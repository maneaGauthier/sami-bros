<html>
<head>
<title>HotKeyUI.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #2aacb8;}
.s4 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
HotKeyUI.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">wx</span>
<span class="s0">from </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">lib</span><span class="s2">.</span><span class="s1">scrolledpanel </span><span class="s0">import </span><span class="s1">ScrolledPanel</span>

<span class="s0">class </span><span class="s1">EditHotKeyDialog</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Dialog</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">, </span><span class="s1">id</span><span class="s2">, </span><span class="s1">title</span><span class="s2">, </span><span class="s1">key</span><span class="s2">):</span>
        <span class="s1">wx</span><span class="s2">.</span><span class="s1">Dialog</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">, </span><span class="s1">id</span><span class="s2">, </span><span class="s1">title</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">250</span><span class="s2">, </span><span class="s3">240</span><span class="s2">))</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">currKey </span><span class="s2">= </span><span class="s1">key</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">panel </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Panel</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateUI</span><span class="s2">()</span>
        <span class="s1">vbox </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">VERTICAL</span><span class="s2">)</span>
        <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">panel</span><span class="s2">, </span><span class="s3">1</span><span class="s2">, </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EXPAND</span><span class="s2">, </span><span class="s3">0</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">vbox</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">Layout</span><span class="s2">()</span>

    <span class="s0">def </span><span class="s1">updateUI</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">vbox </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">VERTICAL</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">label </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">StaticText</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">panel</span><span class="s2">, </span><span class="s1">label</span><span class="s2">=</span><span class="s4">''</span><span class="s2">)</span>
        <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">label</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">RadioBox</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">panel</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s4">&quot;&quot;</span><span class="s2">, </span><span class="s1">choices</span><span class="s2">=[</span><span class="s4">'None'</span><span class="s2">, </span><span class="s4">'Shift'</span><span class="s2">, </span><span class="s4">'Control'</span><span class="s2">], </span><span class="s1">majorDimension</span><span class="s2">=</span><span class="s3">1</span><span class="s2">, </span><span class="s1">style</span><span class="s2">=</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">RA_SPECIFY_ROWS</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">.</span><span class="s1">Bind</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EVT_RADIOBOX</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">onChangeModifier</span><span class="s2">)</span>
        <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">)</span>
        <span class="s1">itemPanel </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Panel</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">panel</span><span class="s2">)</span>
        <span class="s1">hbox </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">HORIZONTAL</span><span class="s2">)</span>
        <span class="s1">keyList </span><span class="s2">= [</span><span class="s4">''</span><span class="s2">]</span>
        <span class="s1">keyList</span><span class="s2">.</span><span class="s1">extend</span><span class="s2">(</span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">specialKeys</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Choice</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s1">choices</span><span class="s2">=</span><span class="s1">keyList</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Bind</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EVT_CHOICE</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">onChangeSpecialKey</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">TextCtrl</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">30</span><span class="s2">, </span><span class="s3">20</span><span class="s2">))</span>
        <span class="s1">button </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Button</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s4">'Apply'</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">50</span><span class="s2">, </span><span class="s3">20</span><span class="s2">))</span>
        <span class="s1">button</span><span class="s2">.</span><span class="s1">Bind</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EVT_BUTTON</span><span class="s2">, </span><span class="s1">self</span><span class="s2">.</span><span class="s1">onApply</span><span class="s2">)</span>
        <span class="s1">hbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">)</span>
        <span class="s1">hbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">)</span>
        <span class="s1">hbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">button</span><span class="s2">)</span>
        <span class="s1">itemPanel</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">hbox</span><span class="s2">)</span>
        <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">panel</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">vbox</span><span class="s2">)</span>

        <span class="s1">keyDesc </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">]</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">label</span><span class="s2">.</span><span class="s1">SetLabel</span><span class="s2">(</span><span class="s1">keyDesc</span><span class="s2">[</span><span class="s3">0</span><span class="s2">])</span>
        <span class="s0">if </span><span class="s4">'shift' </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s4">'Shift'</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
            <span class="s1">keyStr </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">[</span><span class="s1">len</span><span class="s2">(</span><span class="s4">'shift-'</span><span class="s2">):]</span>
        <span class="s0">elif </span><span class="s4">'control' </span><span class="s0">in </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s4">'Control'</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
            <span class="s1">keyStr </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">[</span><span class="s1">len</span><span class="s2">(</span><span class="s4">'control-'</span><span class="s2">):]</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s4">'None'</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">True</span><span class="s2">)</span>
            <span class="s1">keyStr </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span>

        <span class="s0">if </span><span class="s1">keyStr </span><span class="s0">in </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">specialKeys</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">SetValue</span><span class="s2">(</span><span class="s4">''</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s1">keyStr</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s4">''</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">SetValue</span><span class="s2">(</span><span class="s1">keyStr</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">onChangeModifier</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">evt</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">evt</span><span class="s2">.</span><span class="s1">GetString</span><span class="s2">() == </span><span class="s4">'None'</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">True</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">SetStringSelection</span><span class="s2">(</span><span class="s4">''</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">True</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">onChangeSpecialKey</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">evt</span><span class="s2">):</span>
        <span class="s0">if </span><span class="s1">evt</span><span class="s2">.</span><span class="s1">GetString</span><span class="s2">() != </span><span class="s4">''</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">SetValue</span><span class="s2">(</span><span class="s4">''</span><span class="s2">)</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">Enable</span><span class="s2">(</span><span class="s0">True</span><span class="s2">)</span>

    <span class="s0">def </span><span class="s1">onApply</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">evt</span><span class="s2">):</span>
        <span class="s1">modifier </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">modifierRadio</span><span class="s2">.</span><span class="s1">GetStringSelection</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">modifier </span><span class="s2">== </span><span class="s4">'Shift'</span><span class="s2">:</span>
            <span class="s1">prefix </span><span class="s2">= </span><span class="s4">'shift-'</span>
        <span class="s0">elif </span><span class="s1">modifier </span><span class="s2">== </span><span class="s4">'Control'</span><span class="s2">:</span>
            <span class="s1">prefix </span><span class="s2">= </span><span class="s4">'control-'</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">prefix </span><span class="s2">= </span><span class="s4">''</span>

        <span class="s1">specialKey </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">specialKeyCombo</span><span class="s2">.</span><span class="s1">GetStringSelection</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">specialKey </span><span class="s2">== </span><span class="s4">''</span><span class="s2">:</span>
            <span class="s1">newKeyStr</span><span class="s2">= </span><span class="s1">prefix </span><span class="s2">+ </span><span class="s1">self</span><span class="s2">.</span><span class="s1">keyEntry</span><span class="s2">.</span><span class="s1">GetValue</span><span class="s2">().</span><span class="s1">lower</span><span class="s2">()</span>
        <span class="s0">else</span><span class="s2">:</span>
            <span class="s1">newKeyStr </span><span class="s2">= </span><span class="s1">specialKey</span>

        <span class="s0">if </span><span class="s1">newKeyStr </span><span class="s2">!= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">:</span>
            <span class="s0">if </span><span class="s1">newKeyStr </span><span class="s0">in </span><span class="s1">list</span><span class="s2">(</span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">()):</span>
                <span class="s1">print</span><span class="s2">(</span><span class="s4">'a hotkey is to be overridden with %s' </span><span class="s2">% </span><span class="s1">newKeyStr</span><span class="s2">)</span>
                <span class="s1">oldKeyDesc </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">newKeyStr</span><span class="s2">]</span>
                <span class="s1">msg </span><span class="s2">= </span><span class="s4">'The hotkey is already assigned to %s</span><span class="s0">\n</span><span class="s4">'</span><span class="s2">%</span><span class="s1">oldKeyDesc</span><span class="s2">[</span><span class="s3">0</span><span class="s2">] +</span><span class="s1">\</span>
                      <span class="s4">'Do you want to override this?'</span>

                <span class="s1">dialog </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">MessageDialog</span><span class="s2">(</span><span class="s0">None</span><span class="s2">, </span><span class="s1">msg</span><span class="s2">, </span><span class="s4">'Hot Key exists!'</span><span class="s2">,</span>
                                        <span class="s1">wx</span><span class="s2">.</span><span class="s1">YES_NO </span><span class="s2">| </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">NO_DEFAULT </span><span class="s2">| </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">ICON_QUESTION</span><span class="s2">)</span>
                <span class="s1">result </span><span class="s2">= </span><span class="s1">dialog</span><span class="s2">.</span><span class="s1">ShowModal</span><span class="s2">()</span>
                <span class="s0">if </span><span class="s1">result </span><span class="s2">== </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">ID_YES</span><span class="s2">:</span>
                    <span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">newKeyStr</span><span class="s2">] = </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">]</span>
                    <span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s4">'__removed__' </span><span class="s2">+ </span><span class="s1">newKeyStr</span><span class="s2">] = </span><span class="s1">oldKeyDesc</span>
                    <span class="s0">del </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">]</span>
            <span class="s0">else</span><span class="s2">:</span>
                <span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">newKeyStr</span><span class="s2">] = </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">]</span>
                <span class="s0">del </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">self</span><span class="s2">.</span><span class="s1">currKey</span><span class="s2">]</span>

        <span class="s1">self</span><span class="s2">.</span><span class="s1">Destroy</span><span class="s2">()</span>

<span class="s0">class </span><span class="s1">HotKeyPanel</span><span class="s2">(</span><span class="s1">ScrolledPanel</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">):</span>
        <span class="s1">ScrolledPanel</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">parent</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateUI</span><span class="s2">()</span>

    <span class="s0">def </span><span class="s1">updateUI</span><span class="s2">(</span><span class="s1">self</span><span class="s2">):</span>
        <span class="s1">vbox </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">VERTICAL</span><span class="s2">)</span>
        <span class="s1">keys </span><span class="s2">= </span><span class="s1">list</span><span class="s2">(</span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">())</span>
        <span class="s1">keys</span><span class="s2">.</span><span class="s1">sort</span><span class="s2">()</span>
        <span class="s0">for </span><span class="s1">key </span><span class="s0">in </span><span class="s1">keys</span><span class="s2">:</span>
            <span class="s1">keyDesc </span><span class="s2">= </span><span class="s1">base</span><span class="s2">.</span><span class="s1">direct</span><span class="s2">.</span><span class="s1">hotKeyMap</span><span class="s2">[</span><span class="s1">key</span><span class="s2">]</span>
            <span class="s1">itemPanel </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Panel</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span>
            <span class="s1">sizer </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">HORIZONTAL</span><span class="s2">)</span>
            <span class="s1">space </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">StaticText</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, </span><span class="s1">label</span><span class="s2">=</span><span class="s4">''</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">10</span><span class="s2">,</span><span class="s3">20</span><span class="s2">))</span>
            <span class="s1">hotKey </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">StaticText</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, </span><span class="s1">label</span><span class="s2">=</span><span class="s1">key</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">100</span><span class="s2">, </span><span class="s3">20</span><span class="s2">))</span>
            <span class="s1">desc </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">StaticText</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, </span><span class="s1">label</span><span class="s2">=</span><span class="s1">keyDesc</span><span class="s2">[</span><span class="s3">0</span><span class="s2">], </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">380</span><span class="s2">, </span><span class="s3">20</span><span class="s2">))</span>
            <span class="s1">button </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Button</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s4">'Edit'</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">40</span><span class="s2">, </span><span class="s3">20</span><span class="s2">))</span>
            <span class="s1">button</span><span class="s2">.</span><span class="s1">Bind</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EVT_BUTTON</span><span class="s2">, </span><span class="s0">lambda </span><span class="s1">p0 </span><span class="s2">= </span><span class="s0">None</span><span class="s2">, </span><span class="s1">p1 </span><span class="s2">= </span><span class="s1">key</span><span class="s2">: </span><span class="s1">self</span><span class="s2">.</span><span class="s1">onEdit</span><span class="s2">(</span><span class="s1">p0</span><span class="s2">, </span><span class="s1">p1</span><span class="s2">))</span>
            <span class="s1">sizer</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">button</span><span class="s2">)</span>
            <span class="s1">sizer</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">space</span><span class="s2">)</span>
            <span class="s1">sizer</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">hotKey</span><span class="s2">)</span>
            <span class="s1">sizer</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">desc</span><span class="s2">, </span><span class="s3">1</span><span class="s2">, </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EXPAND</span><span class="s2">)</span>
            <span class="s1">itemPanel</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">sizer</span><span class="s2">)</span>
            <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">itemPanel</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">vbox</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">Layout</span><span class="s2">()</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">SetupScrolling</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">scroll_y</span><span class="s2">=</span><span class="s0">True</span><span class="s2">, </span><span class="s1">rate_y</span><span class="s2">=</span><span class="s3">20</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent</span><span class="s2">.</span><span class="s1">parent</span><span class="s2">.</span><span class="s1">updateMenu</span><span class="s2">()</span>

    <span class="s0">def </span><span class="s1">onEdit</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">evt</span><span class="s2">, </span><span class="s1">key</span><span class="s2">):</span>
        <span class="s1">base</span><span class="s2">.</span><span class="s1">le</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">.</span><span class="s1">bindKeyEvents</span><span class="s2">(</span><span class="s0">False</span><span class="s2">)</span>
        <span class="s1">editUI </span><span class="s2">= </span><span class="s1">EditHotKeyDialog</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, -</span><span class="s3">1</span><span class="s2">, </span><span class="s4">'Edit Hot Key'</span><span class="s2">, </span><span class="s1">key</span><span class="s2">)</span>
        <span class="s1">editUI</span><span class="s2">.</span><span class="s1">ShowModal</span><span class="s2">()</span>
        <span class="s1">editUI</span><span class="s2">.</span><span class="s1">Destroy</span><span class="s2">()</span>

        <span class="s1">sizer </span><span class="s2">= </span><span class="s1">self</span><span class="s2">.</span><span class="s1">GetSizer</span><span class="s2">()</span>
        <span class="s0">if </span><span class="s1">sizer </span><span class="s0">is not None</span><span class="s2">:</span>
            <span class="s1">sizer</span><span class="s2">.</span><span class="s1">DeleteWindows</span><span class="s2">()</span>
            <span class="s1">self</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s0">None</span><span class="s2">)</span>
        <span class="s1">base</span><span class="s2">.</span><span class="s1">le</span><span class="s2">.</span><span class="s1">ui</span><span class="s2">.</span><span class="s1">bindKeyEvents</span><span class="s2">(</span><span class="s0">True</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">updateUI</span><span class="s2">()</span>

<span class="s0">class </span><span class="s1">HotKeyUI</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">Dialog</span><span class="s2">):</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">, </span><span class="s1">id</span><span class="s2">, </span><span class="s1">title</span><span class="s2">):</span>
        <span class="s1">wx</span><span class="s2">.</span><span class="s1">Dialog</span><span class="s2">.</span><span class="s1">__init__</span><span class="s2">(</span><span class="s1">self</span><span class="s2">, </span><span class="s1">parent</span><span class="s2">, </span><span class="s1">id</span><span class="s2">, </span><span class="s1">title</span><span class="s2">, </span><span class="s1">size</span><span class="s2">=(</span><span class="s3">550</span><span class="s2">, </span><span class="s3">500</span><span class="s2">))</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">parent </span><span class="s2">= </span><span class="s1">parent</span>
        <span class="s1">panel </span><span class="s2">= </span><span class="s1">HotKeyPanel</span><span class="s2">(</span><span class="s1">self</span><span class="s2">)</span>
        <span class="s1">vbox </span><span class="s2">= </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">BoxSizer</span><span class="s2">(</span><span class="s1">wx</span><span class="s2">.</span><span class="s1">VERTICAL</span><span class="s2">)</span>
        <span class="s1">vbox</span><span class="s2">.</span><span class="s1">Add</span><span class="s2">(</span><span class="s1">panel</span><span class="s2">, </span><span class="s3">1</span><span class="s2">, </span><span class="s1">wx</span><span class="s2">.</span><span class="s1">EXPAND</span><span class="s2">, </span><span class="s3">0</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">SetSizer</span><span class="s2">(</span><span class="s1">vbox</span><span class="s2">)</span>
        <span class="s1">self</span><span class="s2">.</span><span class="s1">Layout</span><span class="s2">()</span>
</pre>
</body>
</html>